<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ÈäÄÊ≤≥Á≥ªÊé¢Á¥¢„Ç¢„Éó„É™</title>
		<style>
			@import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap");

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: "Orbitron", monospace;
				background: #000;
				color: #fff;
				overflow: hidden;
				cursor: crosshair;
			}

			#container {
				position: relative;
				width: 100vw;
				height: 100vh;
			}

			#info {
				position: absolute;
				top: 20px;
				left: 20px;
				z-index: 100;
				background: rgba(0, 20, 40, 0.8);
				padding: 15px;
				border-radius: 10px;
				border: 1px solid #00ffff;
				box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
				backdrop-filter: blur(5px);
			}

			#info h1 {
				color: #00ffff;
				font-size: 18px;
				margin-bottom: 10px;
				text-shadow: 0 0 10px #00ffff;
			}

			#info p {
				font-size: 12px;
				color: #ccc;
				line-height: 1.4;
			}

			#controls {
				position: absolute;
				top: 20px;
				right: 20px;
				z-index: 100;
				background: rgba(0, 20, 40, 0.8);
				padding: 15px;
				border-radius: 10px;
				border: 1px solid #00ffff;
				backdrop-filter: blur(5px);
			}

			#controls h3 {
				color: #00ffff;
				font-size: 14px;
				margin-bottom: 10px;
			}

			#controls p {
				font-size: 11px;
				color: #ccc;
				margin-bottom: 5px;
			}

			#modal {
				display: none;
				position: fixed;
				z-index: 1000;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(0, 0, 0, 0.8);
				backdrop-filter: blur(5px);
			}

			.modal-content {
				background: linear-gradient(135deg, #001122 0%, #003366 100%);
				margin: 5% auto;
				padding: 30px;
				border: 2px solid #00ffff;
				border-radius: 15px;
				width: 90%;
				max-width: 800px;
				position: relative;
				box-shadow: 0 0 50px rgba(0, 255, 255, 0.5);
				animation: modalSlideIn 0.3s ease-out;
			}

			@keyframes modalSlideIn {
				from {
					opacity: 0;
					transform: translateY(-50px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.close {
				color: #00ffff;
				float: right;
				font-size: 28px;
				font-weight: bold;
				cursor: pointer;
				transition: all 0.3s;
			}

			.close:hover {
				color: #ffffff;
				text-shadow: 0 0 10px #00ffff;
			}

			.modal-header h2 {
				color: #00ffff;
				font-size: 24px;
				margin-bottom: 20px;
				text-shadow: 0 0 15px #00ffff;
			}

			.modal-body {
				color: #ccc;
				line-height: 1.6;
				display: flex;
				gap: 20px;
				align-items: flex-start;
			}

			.modal-text {
				flex: 1;
			}

			.modal-visual {
				flex: 0 0 250px;
				display: flex;
				flex-direction: column;
				gap: 10px;
			}

			.modal-image {
				width: 100%;
				height: 120px;
				border: 2px solid #00ffff;
				border-radius: 8px;
				background: #000011;
				overflow: hidden;
			}

			.modal-image img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				border-radius: 6px;
				transition: transform 0.3s ease;
				display: block;
			}

			.modal-image img:hover {
				transform: scale(1.02);
			}

			.modal-3d {
				width: 100%;
				height: 120px;
				border: 2px solid #00ffff;
				border-radius: 8px;
				background: #000011;
				position: relative;
				overflow: hidden;
			}

			.modal-3d canvas {
				border-radius: 6px;
			}

			.celestial-label {
				position: absolute;
				bottom: 10px;
				left: 50%;
				transform: translateX(-50%);
				background: rgba(0, 0, 0, 0.8);
				color: #00ffff;
				padding: 4px 8px;
				border-radius: 4px;
				font-size: 10px;
				border: 1px solid #00ffff;
				backdrop-filter: blur(3px);
				z-index: 300;
				display: none;
			}

			/* „É¢„Éê„Ç§„É´Áî®„ÅÆÂ§©‰ΩìÂêçË°®Á§∫ */
			.mobile-planet-info {
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				background: rgba(0, 20, 40, 0.95);
				color: #00ffff;
				padding: 15px 20px;
				border-radius: 10px;
				border: 2px solid #00ffff;
				font-size: 16px;
				font-weight: bold;
				z-index: 1001;
				display: none;
				text-align: center;
				backdrop-filter: blur(10px);
				box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
			}

			.celestial-image {
				width: 100% !important;
				height: 100% !important;
				object-fit: cover;
				border-radius: 8px;
				position: relative;
				animation: planetRotate 20s linear infinite;
				transform-origin: center center;
				filter: brightness(1.1) contrast(1.1) saturate(1.2);
				transition: all 0.3s ease;
			}

			.celestial-image:hover {
				transform: scale(1.05);
				filter: brightness(1.3) contrast(1.2) saturate(1.4);
			}

			@keyframes planetRotate {
				0% {
					transform: rotate(0deg) scale(1);
				}
				25% {
					transform: rotate(90deg) scale(1.02);
				}
				50% {
					transform: rotate(180deg) scale(1);
				}
				75% {
					transform: rotate(270deg) scale(1.02);
				}
				100% {
					transform: rotate(360deg) scale(1);
				}
			}

			.sun-image {
				animation: sunPulse 3s ease-in-out infinite alternate !important;
			}

			@keyframes sunPulse {
				0% {
					transform: rotate(0deg) scale(1);
					filter: brightness(1.2) contrast(1.1) saturate(1.3)
						drop-shadow(0 0 20px #ffff00);
				}
				100% {
					transform: rotate(360deg) scale(1.05);
					filter: brightness(1.5) contrast(1.3) saturate(1.5)
						drop-shadow(0 0 30px #ffaa00);
				}
			}

			.earth-image {
				animation: earthRotate 15s linear infinite,
					earthGlow 4s ease-in-out infinite alternate !important;
			}

			@keyframes earthRotate {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			@keyframes earthGlow {
				0% {
					filter: brightness(1.1) contrast(1.1) saturate(1.3)
						drop-shadow(0 0 15px #4a90e2);
				}
				100% {
					filter: brightness(1.3) contrast(1.2) saturate(1.4)
						drop-shadow(0 0 25px #6bb6ff);
				}
			}

			.saturn-image {
				animation: saturnWobble 8s ease-in-out infinite !important;
			}

			@keyframes saturnWobble {
				0%,
				100% {
					transform: rotate(0deg) scale(1);
					filter: brightness(1.1) contrast(1.1) saturate(1.2);
				}
				25% {
					transform: rotate(5deg) scale(1.02);
					filter: brightness(1.2) contrast(1.15) saturate(1.3);
				}
				50% {
					transform: rotate(0deg) scale(1.01);
					filter: brightness(1.15) contrast(1.12) saturate(1.25);
				}
				75% {
					transform: rotate(-5deg) scale(1.02);
					filter: brightness(1.2) contrast(1.15) saturate(1.3);
				}
			}

			.gas-giant {
				animation: gasGiantSwirl 12s ease-in-out infinite !important;
			}

			@keyframes gasGiantSwirl {
				0% {
					transform: rotate(0deg) scale(1);
					filter: brightness(1.1) contrast(1.1) saturate(1.2) hue-rotate(0deg);
				}
				33% {
					transform: rotate(120deg) scale(1.03);
					filter: brightness(1.25) contrast(1.2) saturate(1.4) hue-rotate(10deg);
				}
				66% {
					transform: rotate(240deg) scale(1.01);
					filter: brightness(1.15) contrast(1.15) saturate(1.3)
						hue-rotate(-10deg);
				}
				100% {
					transform: rotate(360deg) scale(1);
					filter: brightness(1.1) contrast(1.1) saturate(1.2) hue-rotate(0deg);
				}
			}

			.rocky-planet {
				animation: rockyPlanetRotate 10s linear infinite,
					rockyGlow 6s ease-in-out infinite alternate !important;
			}

			@keyframes rockyPlanetRotate {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			@keyframes rockyGlow {
				0% {
					filter: brightness(1) contrast(1.1) saturate(1.1);
				}
				100% {
					filter: brightness(1.2) contrast(1.2) saturate(1.3);
				}
			}

			.moon-image {
				animation: moonPhases 8s ease-in-out infinite !important;
			}

			@keyframes moonPhases {
				0%,
				100% {
					transform: rotate(0deg) scale(1);
					filter: brightness(1) contrast(1.1) saturate(0.9);
				}
				25% {
					transform: rotate(90deg) scale(1.02);
					filter: brightness(1.1) contrast(1.15) saturate(1);
				}
				50% {
					transform: rotate(180deg) scale(1.01);
					filter: brightness(1.2) contrast(1.2) saturate(1.1);
				}
				75% {
					transform: rotate(270deg) scale(1.02);
					filter: brightness(1.1) contrast(1.15) saturate(1);
				}
			}

			.modal-body h3 {
				color: #00aaff;
				margin: 20px 0 10px 0;
				font-size: 18px;
			}

			.fact-list {
				list-style: none;
				padding-left: 0;
			}

			.fact-list li {
				background: rgba(0, 255, 255, 0.1);
				margin: 8px 0;
				padding: 10px;
				border-left: 3px solid #00ffff;
				border-radius: 5px;
			}

			#loading {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				z-index: 999;
				text-align: center;
			}

			.loading-spinner {
				width: 50px;
				height: 50px;
				border: 3px solid rgba(0, 255, 255, 0.3);
				border-top: 3px solid #00ffff;
				border-radius: 50%;
				animation: spin 1s linear infinite;
				margin: 0 auto 20px;
			}

			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			#object-label {
				position: absolute;
				background: rgba(0, 0, 0, 0.8);
				color: #00ffff;
				padding: 8px 12px;
				border-radius: 5px;
				font-size: 12px;
				pointer-events: none;
				border: 1px solid #00ffff;
				display: none;
				z-index: 200;
				backdrop-filter: blur(3px);
			}

			@media (max-width: 768px) {
				#info,
				#controls {
					display: none;
				}

				.modal-content {
					margin: 10% auto;
					width: 95%;
					padding: 20px;
				}
			}
		</style>
	</head>
	<body>
		<div id="loading">
			<div class="loading-spinner"></div>
			<p style="color: #00ffff">ÈäÄÊ≤≥Á≥ª„ÇíË™≠„ÅøËæº„Åø‰∏≠...</p>
		</div>

		<div id="container"></div>

		<div id="info">
			<h1>üåå ÈäÄÊ≤≥Á≥ªÊé¢Á¥¢„Ç¢„Éó„É™</h1>
			<p>„Éû„Ç¶„Çπ„ÅßÂÆáÂÆô„ÇíÊé¢Á¥¢„Åó„ÄÅ<br />Â§©‰Ωì„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Ë©≥Á¥∞„ÇíÁ¢∫Ë™ç„Åó„Çà„ÅÜÔºÅ</p>
		</div>

		<div id="controls">
			<h3>Êìç‰ΩúÊñπÊ≥ï</h3>
			<p>üñ±Ô∏è „Éâ„É©„ÉÉ„Ç∞: ÂõûËª¢</p>
			<p>üéØ „Éõ„Ç§„Éº„É´: „Ç∫„Éº„É†</p>
			<p>üëÜ „ÇØ„É™„ÉÉ„ÇØ: Â§©‰ΩìË©≥Á¥∞</p>
		</div>

		<div id="object-label"></div>
		<div id="mobile-planet-info" class="mobile-planet-info"></div>

		<div id="modal">
			<div class="modal-content">
				<span class="close">&times;</span>
				<div class="modal-header">
					<h2 id="modal-title">Â§©‰ΩìÂêç</h2>
				</div>
				<div class="modal-body">
					<div class="modal-text">
						<div id="modal-content"></div>
					</div>
					<div class="modal-visual">
						<div class="modal-image">
							<img id="celestial-image" style="display: none" alt="Â§©‰ΩìÁîªÂÉè" />
						</div>
						<div class="modal-3d" id="modal-3d-container"></div>
					</div>
				</div>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
		<script>
			function createProceduralTexture(bodyData) {
				const canvas = document.createElement("canvas");
				const ctx = canvas.getContext("2d");
				canvas.width = 512;
				canvas.height = 256;

				switch (bodyData.name) {
					case "Â§™ÈôΩ":
						return createSunTexture(ctx, canvas);
					case "Âú∞ÁêÉ":
						return createEarthTexture(ctx, canvas);
					case "Êúà":
						return createMoonTexture(ctx, canvas);
					case "ÁÅ´Êòü":
						return createMarsTexture(ctx, canvas);
					case "Êú®Êòü":
						return createJupiterTexture(ctx, canvas);
					case "ÂúüÊòü":
						return createSaturnTexture(ctx, canvas);
					case "Â§©ÁéãÊòü":
						return createUranusTexture(ctx, canvas);
					case "Êµ∑ÁéãÊòü":
						return createNeptuneTexture(ctx, canvas);
					case "ÈáëÊòü":
						return createVenusTexture(ctx, canvas);
					case "Ê∞¥Êòü":
						return createMercuryTexture(ctx, canvas);
					default:
						return createDefaultTexture(ctx, canvas, bodyData.color);
				}
			}

			function createSunTexture(ctx, canvas) {
				// Â§™ÈôΩ„ÅÆÊ†∏ËûçÂêàÊ®°Êßò
				const gradient = ctx.createRadialGradient(256, 128, 0, 256, 128, 200);
				gradient.addColorStop(0, "#ffff66");
				gradient.addColorStop(0.3, "#ffaa00");
				gradient.addColorStop(0.6, "#ff6600");
				gradient.addColorStop(1, "#cc3300");

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// Â§™ÈôΩ„Éï„É¨„Ç¢Ê®°Êßò
				for (let i = 0; i < 50; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;
					const radius = Math.random() * 20 + 5;

					const flareGradient = ctx.createRadialGradient(x, y, 0, x, y, radius);
					flareGradient.addColorStop(0, "rgba(255, 255, 255, 0.8)");
					flareGradient.addColorStop(1, "rgba(255, 255, 255, 0)");

					ctx.fillStyle = flareGradient;
					ctx.fillRect(x - radius, y - radius, radius * 2, radius * 2);
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createEarthTexture(ctx, canvas) {
				// Âú∞ÁêÉ„ÅÆÊµ∑„Å®Èô∏
				const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
				gradient.addColorStop(0, "#87ceeb"); // ÂåóÊ•µ„ÅÆÊ∞∑
				gradient.addColorStop(0.2, "#4682b4"); // Êµ∑
				gradient.addColorStop(0.4, "#228b22"); // Ê£ÆÊûó
				gradient.addColorStop(0.6, "#daa520"); // Á†ÇÊº†
				gradient.addColorStop(0.8, "#4682b4"); // Êµ∑
				gradient.addColorStop(1, "#e0e0e0"); // ÂçóÊ•µ„ÅÆÊ∞∑

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// Â§ßÈô∏Ê®°Êßò
				for (let i = 0; i < 15; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;
					const width = Math.random() * 100 + 50;
					const height = Math.random() * 50 + 20;

					ctx.fillStyle = `rgba(34, 139, 34, ${Math.random() * 0.5 + 0.3})`;
					ctx.fillRect(x, y, width, height);
				}

				// Èõ≤Ê®°Êßò
				for (let i = 0; i < 30; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;
					const radius = Math.random() * 30 + 10;

					ctx.fillStyle = `rgba(255, 255, 255, ${Math.random() * 0.4 + 0.2})`;
					ctx.beginPath();
					ctx.arc(x, y, radius, 0, Math.PI * 2);
					ctx.fill();
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createMoonTexture(ctx, canvas) {
				// Êúà„ÅÆË°®Èù¢
				ctx.fillStyle = "#c0c0c0";
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// „ÇØ„É¨„Éº„Çø„Éº
				for (let i = 0; i < 40; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;
					const radius = Math.random() * 25 + 5;

					const craterGradient = ctx.createRadialGradient(
						x,
						y,
						0,
						x,
						y,
						radius
					);
					craterGradient.addColorStop(0, "#808080");
					craterGradient.addColorStop(0.7, "#a0a0a0");
					craterGradient.addColorStop(1, "#c0c0c0");

					ctx.fillStyle = craterGradient;
					ctx.beginPath();
					ctx.arc(x, y, radius, 0, Math.PI * 2);
					ctx.fill();

					// „ÇØ„É¨„Éº„Çø„Éº„ÅÆÁ∏Å
					ctx.strokeStyle = "#606060";
					ctx.lineWidth = 1;
					ctx.stroke();
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createMarsTexture(ctx, canvas) {
				// ÁÅ´Êòü„ÅÆËµ§„ÅÑË°®Èù¢
				const gradient = ctx.createLinearGradient(
					0,
					0,
					canvas.width,
					canvas.height
				);
				gradient.addColorStop(0, "#cd853f");
				gradient.addColorStop(0.3, "#cd5c5c");
				gradient.addColorStop(0.6, "#a0522d");
				gradient.addColorStop(1, "#8b4513");

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// ÁÅ´Êòü„ÅÆÊ∏ìË∞∑„Å®‰∏ò
				for (let i = 0; i < 20; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;
					const length = Math.random() * 100 + 50;

					ctx.strokeStyle = `rgba(139, 69, 19, ${Math.random() * 0.5 + 0.3})`;
					ctx.lineWidth = Math.random() * 3 + 1;
					ctx.beginPath();
					ctx.moveTo(x, y);
					ctx.lineTo(x + length, y + Math.random() * 20 - 10);
					ctx.stroke();
				}

				// Ê•µÂÜ†
				ctx.fillStyle = "rgba(255, 255, 255, 0.6)";
				ctx.fillRect(0, 0, canvas.width, 20);
				ctx.fillRect(0, canvas.height - 20, canvas.width, 20);

				return new THREE.CanvasTexture(canvas);
			}

			function createJupiterTexture(ctx, canvas) {
				// Êú®Êòü„ÅÆÁ∏ûÊ®°Êßò
				const stripes = [
					"#daa520",
					"#ff8c00",
					"#ffa500",
					"#ffb347",
					"#daa520",
					"#cd853f",
				];

				const stripeHeight = canvas.height / stripes.length;

				stripes.forEach((color, index) => {
					ctx.fillStyle = color;
					ctx.fillRect(0, index * stripeHeight, canvas.width, stripeHeight);
				});

				// Â§ßËµ§Êñë
				const spotX = canvas.width * 0.7;
				const spotY = canvas.height * 0.4;
				const spotGradient = ctx.createRadialGradient(
					spotX,
					spotY,
					0,
					spotX,
					spotY,
					40
				);
				spotGradient.addColorStop(0, "#ff4500");
				spotGradient.addColorStop(0.5, "#ff6347");
				spotGradient.addColorStop(1, "rgba(255, 99, 71, 0)");

				ctx.fillStyle = spotGradient;
				ctx.beginPath();
				ctx.ellipse(spotX, spotY, 50, 30, 0, 0, Math.PI * 2);
				ctx.fill();

				// ÂµêÊ®°Êßò
				for (let i = 0; i < 10; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;

					ctx.fillStyle = `rgba(255, 165, 0, ${Math.random() * 0.3 + 0.1})`;
					ctx.beginPath();
					ctx.ellipse(
						x,
						y,
						Math.random() * 20 + 10,
						Math.random() * 10 + 5,
						0,
						0,
						Math.PI * 2
					);
					ctx.fill();
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createSaturnTexture(ctx, canvas) {
				// ÂúüÊòü„ÅÆÊ∑°„ÅÑËâ≤Âêà„ÅÑ
				const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
				gradient.addColorStop(0, "#faf0e6");
				gradient.addColorStop(0.3, "#f5deb3");
				gradient.addColorStop(0.6, "#deb887");
				gradient.addColorStop(1, "#d2b48c");

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// Á∏ûÊ®°Êßò
				for (let i = 0; i < 8; i++) {
					const y = (canvas.height / 8) * i;
					ctx.fillStyle = `rgba(210, 180, 140, ${Math.random() * 0.3 + 0.1})`;
					ctx.fillRect(0, y, canvas.width, canvas.height / 16);
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createUranusTexture(ctx, canvas) {
				// Â§©ÁéãÊòü„ÅÆÈùíÁ∑ëËâ≤
				const gradient = ctx.createRadialGradient(256, 128, 0, 256, 128, 200);
				gradient.addColorStop(0, "#40e0d0");
				gradient.addColorStop(0.5, "#20b2aa");
				gradient.addColorStop(1, "#008b8b");

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// „É°„Çø„É≥„ÅÆÈõ≤
				for (let i = 0; i < 15; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;

					ctx.fillStyle = `rgba(64, 224, 208, ${Math.random() * 0.3 + 0.1})`;
					ctx.beginPath();
					ctx.arc(x, y, Math.random() * 20 + 5, 0, Math.PI * 2);
					ctx.fill();
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createNeptuneTexture(ctx, canvas) {
				// Êµ∑ÁéãÊòü„ÅÆÊ∑±„ÅÑÈùí
				const gradient = ctx.createRadialGradient(256, 128, 0, 256, 128, 200);
				gradient.addColorStop(0, "#4169e1");
				gradient.addColorStop(0.5, "#0066cc");
				gradient.addColorStop(1, "#003366");

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// Â§ßÊöóÊñë
				const darkSpotX = canvas.width * 0.3;
				const darkSpotY = canvas.height * 0.6;
				ctx.fillStyle = "rgba(0, 0, 100, 0.5)";
				ctx.beginPath();
				ctx.ellipse(darkSpotX, darkSpotY, 40, 25, 0, 0, Math.PI * 2);
				ctx.fill();

				// È¢®„ÅÆÁ≠ã
				for (let i = 0; i < 12; i++) {
					const y = (canvas.height / 12) * i;
					ctx.strokeStyle = `rgba(100, 149, 237, ${Math.random() * 0.3 + 0.1})`;
					ctx.lineWidth = 2;
					ctx.beginPath();
					ctx.moveTo(0, y);
					ctx.lineTo(canvas.width, y + Math.sin(i) * 10);
					ctx.stroke();
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createVenusTexture(ctx, canvas) {
				// ÈáëÊòü„ÅÆÁ°´ÈÖ∏Èõ≤
				const gradient = ctx.createLinearGradient(
					0,
					0,
					canvas.width,
					canvas.height
				);
				gradient.addColorStop(0, "#ffc649");
				gradient.addColorStop(0.3, "#ffb347");
				gradient.addColorStop(0.6, "#daa520");
				gradient.addColorStop(1, "#b8860b");

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// Èõ≤„ÅÆÊ∏¶Â∑ª„ÅçÊ®°Êßò
				for (let i = 0; i < 20; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;

					ctx.fillStyle = `rgba(255, 198, 73, ${Math.random() * 0.4 + 0.2})`;
					ctx.beginPath();
					ctx.arc(x, y, Math.random() * 15 + 5, 0, Math.PI * 2);
					ctx.fill();
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createMercuryTexture(ctx, canvas) {
				// Ê∞¥Êòü„ÅÆÂ≤©Áü≥Ë°®Èù¢
				const gradient = ctx.createRadialGradient(256, 128, 0, 256, 128, 200);
				gradient.addColorStop(0, "#a0a0a0");
				gradient.addColorStop(0.5, "#8c7853");
				gradient.addColorStop(1, "#696969");

				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				// „ÇØ„É¨„Éº„Çø„ÉºÔºàÊúà„Çà„ÇäÂ∞è„Åï„ÅèÂ§ö„ÅÑÔºâ
				for (let i = 0; i < 60; i++) {
					const x = Math.random() * canvas.width;
					const y = Math.random() * canvas.height;
					const radius = Math.random() * 15 + 2;

					ctx.fillStyle = `rgba(105, 105, 105, ${Math.random() * 0.4 + 0.3})`;
					ctx.beginPath();
					ctx.arc(x, y, radius, 0, Math.PI * 2);
					ctx.fill();
				}

				return new THREE.CanvasTexture(canvas);
			}

			function createDefaultTexture(ctx, canvas, color) {
				ctx.fillStyle = `#${color.toString(16).padStart(6, "0")}`;
				ctx.fillRect(0, 0, canvas.width, canvas.height);
				return new THREE.CanvasTexture(canvas);
			}
			const celestialBodies = [
				{
					name: "Â§™ÈôΩ",
					type: "ÊÅíÊòü",
					radius: 10,
					distance: 0,
					color: 0xffff00,
					imageUrl:
						"https://images.unsplash.com/photo-1614642264762-908ec80756da?w=400",
					description:
						"Â§™ÈôΩÁ≥ª„ÅÆ‰∏≠ÂøÉ„Å´„ÅÇ„ÇãÊÅíÊòü„Åß„ÄÅÂú∞ÁêÉ„Å´ÂÖâ„Å®ÁÜ±„ÇíÊèê‰æõ„Åó„Å¶„ÅÑ„ÇãÂ∑®Â§ß„Å™Ê†∏ËûçÂêàÁÇâ„Åß„Åô„ÄÇ",
					facts: [
						"Ë°®Èù¢Ê∏©Â∫¶: Á¥Ñ5,778K (5,505¬∞C)",
						"Ë≥™Èáè: Âú∞ÁêÉ„ÅÆÁ¥Ñ333,000ÂÄç",
						"Áõ¥ÂæÑ: Âú∞ÁêÉ„ÅÆÁ¥Ñ109ÂÄç",
						"Âπ¥ÈΩ¢: Á¥Ñ46ÂÑÑÂπ¥",
						"ÁµÑÊàê: Ê∞¥Á¥†73%„ÄÅ„Éò„É™„Ç¶„É†25%",
					],
				},
				{
					name: "Ê∞¥Êòü",
					type: "ÊÉëÊòü",
					radius: 1.5,
					distance: 20,
					color: 0x8c7853,
					imageUrl:
						"https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400",
					description:
						"Â§™ÈôΩ„Å´ÊúÄ„ÇÇËøë„ÅÑÊÉëÊòü„Åß„ÄÅÊ•µÁ´Ø„Å™Ê∏©Â∫¶Â∑Æ„ÅåÁâπÂæ¥ÁöÑ„Å™Â∞è„Åï„Å™Â≤©Áü≥ÊÉëÊòü„Åß„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ5,790‰∏ákm",
						"ÂÖ¨Ëª¢Âë®Êúü: 88Êó•",
						"Ëá™Ëª¢Âë®Êúü: 59Êó•",
						"Ë°®Èù¢Ê∏©Â∫¶: -170¬∞C„Äú430¬∞C",
						"Â§ßÊ∞ó: „Åª„ÅºÁúüÁ©∫Áä∂ÊÖã",
					],
				},
				{
					name: "ÈáëÊòü",
					type: "ÊÉëÊòü",
					radius: 2.3,
					distance: 30,
					color: 0xffc649,
					imageUrl:
						"https://images.unsplash.com/photo-1446776558166-79d2b5a625e2?w=400",
					description:
						"Âú∞ÁêÉ„ÅÆ„ÄåÂèåÂ≠êÊòü„Äç„Å®Âëº„Å∞„Çå„ÇãÊÉëÊòü„Åß„ÄÅÊøÉÂéö„Å™Â§ßÊ∞ó„Å´„Çà„ÇãÊ∏©ÂÆ§ÂäπÊûú„ÅßÈùûÂ∏∏„Å´È´òÊ∏©„Åß„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ1ÂÑÑ800‰∏ákm",
						"ÂÖ¨Ëª¢Âë®Êúü: 225Êó•",
						"Ë°®Èù¢Ê∏©Â∫¶: Á¥Ñ460¬∞C",
						"Â§ßÊ∞óÂúß: Âú∞ÁêÉ„ÅÆÁ¥Ñ90ÂÄç",
						"ÈÄÜÂõûËª¢„Åô„ÇãÂîØ‰∏Ä„ÅÆÊÉëÊòü",
					],
				},
				{
					name: "Âú∞ÁêÉ",
					type: "ÊÉëÊòü",
					radius: 2.5,
					distance: 42,
					color: 0x6b93d6,
					imageUrl:
						"https://images.unsplash.com/photo-1614730321146-b6fa6a46bcb4?w=400",
					description:
						"ÁßÅ„Åü„Å°„ÅÆÊïÖÈÉ∑„Åß„ÅÇ„ÇãÁæé„Åó„ÅÑÈùí„ÅÑÊÉëÊòü„ÄÇÁîüÂëΩ„ÅåÂ≠òÂú®„Åô„ÇãÂîØ‰∏ÄÁü•„Çâ„Çå„ÅüÂ§©‰Ωì„Åß„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ1ÂÑÑ4,960‰∏ákm",
						"ÂÖ¨Ëª¢Âë®Êúü: 365.25Êó•",
						"Ë°®Èù¢„ÅÆ71%„ÅåÊµ∑Ê¥ã",
						"Â§ßÊ∞óÁµÑÊàê: Á™íÁ¥†78%„ÄÅÈÖ∏Á¥†21%",
						"ÂîØ‰∏ÄÁ¢∫Ë™ç„Åï„Çå„ÅüÁîüÂëΩÂ≠òÂú®ÊÉëÊòü",
					],
				},
				{
					name: "Êúà",
					type: "Ë°õÊòü",
					radius: 0.8,
					distance: 47,
					color: 0xc0c0c0,
					imageUrl:
						"https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=400",
					description:
						"Âú∞ÁêÉ„ÅÆÂîØ‰∏Ä„ÅÆÂ§©ÁÑ∂Ë°õÊòü„Åß„ÄÅÂú∞ÁêÉ„ÅÆÊΩÆÊ±ê„ÇÑËá™Ëª¢„Å´Â§ß„Åç„Å™ÂΩ±Èüø„Çí‰∏é„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
					facts: [
						"Âú∞ÁêÉ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ38‰∏ákm",
						"Áõ¥ÂæÑ: Âú∞ÁêÉ„ÅÆÁ¥Ñ1/4",
						"ÂÖ¨Ëª¢Âë®Êúü: Á¥Ñ27.3Êó•",
						"ÂêåÊúüÂõûËª¢ÔºàÂ∏∏„Å´Âêå„ÅòÈù¢„ÇíÂú∞ÁêÉ„Å´Âêë„Åë„ÇãÔºâ",
						"„Ç¢„Éù„É≠Ë®àÁîª„Åß‰∫∫È°û„ÅåÂà∞ÈÅî",
					],
				},
				{
					name: "ÁÅ´Êòü",
					type: "ÊÉëÊòü",
					radius: 2.0,
					distance: 60,
					color: 0xcd5c5c,
					imageUrl:
						"https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400",
					description:
						"„ÄåËµ§„ÅÑÊÉëÊòü„Äç„Å®„Åó„Å¶Áü•„Çâ„Çå„ÄÅÂ∞ÜÊù•„ÅÆ‰∫∫È°ûÁßª‰ΩèÂÄôË£ú„Å®„Åó„Å¶Ê≥®ÁõÆ„Åï„Çå„ÇãÊÉëÊòü„Åß„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ2ÂÑÑ2,790‰∏ákm",
						"ÂÖ¨Ëª¢Âë®Êúü: 687Êó•",
						"1Êó•: 24ÊôÇÈñì37ÂàÜ",
						"Ê•µÂÜ†„Å´Ê∞∑„ÅåÂ≠òÂú®",
						"Â§™ÈôΩÁ≥ªÊúÄÂ§ß„ÅÆÁÅ´Â±±„Ç™„É™„É≥„Éù„ÇπÂ±±„Åå„ÅÇ„Çã",
					],
				},
				{
					name: "Êú®Êòü",
					type: "ÊÉëÊòü",
					radius: 6.0,
					distance: 85,
					color: 0xffa500,
					imageUrl:
						"https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=400",
					description:
						"Â§™ÈôΩÁ≥ªÊúÄÂ§ß„ÅÆ„Ç¨„ÇπÊÉëÊòü„Åß„ÄÅÂ§ßËµ§Êñë„Å®Âëº„Å∞„Çå„ÇãÂ∑®Â§ß„Å™Âµê„ÅåÁâπÂæ¥ÁöÑ„Åß„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ7ÂÑÑ7,830‰∏ákm",
						"Ë≥™Èáè: Âú∞ÁêÉ„ÅÆÁ¥Ñ318ÂÄç",
						"Ë°õÊòüÊï∞: 95ÂÄã‰ª•‰∏ä",
						"Â§ßËµ§Êñë: Âú∞ÁêÉ2-3ÂÄãÂàÜ„ÅÆÂ§ß„Åç„Åï„ÅÆÂµê",
						"‰∏ªÊàêÂàÜ: Ê∞¥Á¥†„Å®„Éò„É™„Ç¶„É†",
					],
				},
				{
					name: "ÂúüÊòü",
					type: "ÊÉëÊòü",
					radius: 5.2,
					distance: 110,
					color: 0xffb347,
					imageUrl:
						"https://images.unsplash.com/photo-1446776708417-3aabf90b64be?w=400",
					description:
						"Áæé„Åó„ÅÑ„É™„É≥„Ç∞„ÅßÊúâÂêç„Å™„Ç¨„ÇπÊÉëÊòü„Åß„ÄÅÂØÜÂ∫¶„ÅåÊ∞¥„Çà„Çä‰Ωé„ÅÑÂîØ‰∏Ä„ÅÆÊÉëÊòü„Åß„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ14ÂÑÑ2,700‰∏ákm",
						"ÂØÜÂ∫¶: 0.687g/cm¬≥ÔºàÊ∞¥„Çà„ÇäËªΩ„ÅÑÔºâ",
						"„É™„É≥„Ç∞: Ê∞∑„Å®Â≤©Áü≥„ÅÆÁ≤íÂ≠ê„ÅßÊßãÊàê",
						"Ë°õÊòüÊï∞: 146ÂÄã‰ª•‰∏ä",
						"ÊúÄÂ§ß„ÅÆË°õÊòü„Çø„Ç§„Çø„É≥„ÅØÂ§ßÊ∞ó„ÇíÊåÅ„Å§",
					],
				},
				{
					name: "Â§©ÁéãÊòü",
					type: "ÊÉëÊòü",
					radius: 3.8,
					distance: 140,
					color: 0x40e0d0,
					imageUrl:
						"https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=400",
					description:
						"Ê®™ÂÄí„Åó„Å´ÂõûËª¢„Åô„ÇãÊ∞∑ÊÉëÊòü„Åß„ÄÅ„É°„Çø„É≥„Å´„Çà„ÇäÁæé„Åó„ÅÑÈùíÁ∑ëËâ≤„ÇíÂëà„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ28ÂÑÑ7,500‰∏ákm",
						"Ëá™Ëª¢Ëª∏„ÅÆÂÇæ„Åç: 98Â∫¶ÔºàÊ®™ÂÄí„ÅóÔºâ",
						"ÂÖ¨Ëª¢Âë®Êúü: 84Âπ¥",
						"„É™„É≥„Ç∞: Êöó„Åè„Å¶Á¥∞„ÅÑ",
						"Â§ßÊ∞ó: Ê∞¥Á¥†„ÄÅ„Éò„É™„Ç¶„É†„ÄÅ„É°„Çø„É≥",
					],
				},
				{
					name: "Êµ∑ÁéãÊòü",
					type: "ÊÉëÊòü",
					radius: 3.6,
					distance: 170,
					color: 0x0066cc,
					imageUrl:
						"https://images.unsplash.com/photo-1446776558166-79d2b5a625e2?w=400",
					description:
						"Â§™ÈôΩÁ≥ªÊúÄÈÅ†„ÅÆÊÉëÊòü„Åß„ÄÅÊúÄ„ÇÇÂº∑„ÅÑÈ¢®„ÅåÂêπ„ÅèÁæé„Åó„ÅÑÈùí„ÅÑÊ∞∑ÊÉëÊòü„Åß„Åô„ÄÇ",
					facts: [
						"Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ45ÂÑÑkm",
						"ÂÖ¨Ëª¢Âë®Êúü: 165Âπ¥",
						"È¢®ÈÄü: ÊúÄÈ´ò2,100km/h",
						"Â§ßÊöóÊñë: Êú®Êòü„ÅÆÂ§ßËµ§Êñë„Å´‰ºº„ÅüÂµê",
						"Áô∫Ë¶ã: Êï∞Â≠¶ÁöÑ‰∫àÊ∏¨„Å´„Çà„ÇäÁô∫Ë¶ã",
					],
				},
			];

			// Three.js „Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
			let scene, camera, renderer, controls;
			let celestialObjects = [];
			let raycaster, mouse;
			let selectedObject = null;
			let modalScene, modalCamera, modalRenderer;
			let twinklingStars = [];
			let starfield;
			let isTouch = false;

			// „É¢„Éº„ÉÄ„É´Ë¶ÅÁ¥†
			const modal = document.getElementById("modal");
			const modalTitle = document.getElementById("modal-title");
			const modalContent = document.getElementById("modal-content");
			const modal3DContainer = document.getElementById("modal-3d-container");
			const celestialImage = document.getElementById("celestial-image");
			const closeBtn = document.getElementsByClassName("close")[0];
			const objectLabel = document.getElementById("object-label");
			const mobilePlanetInfo = document.getElementById("mobile-planet-info");

			init();
			animate();

			function init() {
				// „Ç∑„Éº„É≥„ÅÆ‰ΩúÊàê
				scene = new THREE.Scene();

				// „Ç´„É°„É©„ÅÆ‰ΩúÊàê
				camera = new THREE.PerspectiveCamera(
					75,
					window.innerWidth / window.innerHeight,
					0.1,
					1000
				);
				camera.position.set(0, 30, 100);

				// „É¨„É≥„ÉÄ„É©„Éº„ÅÆ‰ΩúÊàê
				renderer = new THREE.WebGLRenderer({ antialias: true });
				renderer.setSize(window.innerWidth, window.innerHeight);
				renderer.setClearColor(0x000011);
				document.getElementById("container").appendChild(renderer.domElement);

				// „É¨„Ç§„Ç≠„É£„Çπ„Çø„Éº„Å®„Éû„Ç¶„Çπ„ÅÆÂàùÊúüÂåñ
				raycaster = new THREE.Raycaster();
				mouse = new THREE.Vector2();

				// ÊòüÁ©∫„ÅÆËÉåÊôØ„Çí‰ΩúÊàê
				createStarfield();

				// Â§©‰Ωì„Çí‰ΩúÊàê
				createCelestialBodies();

				// OrbitControls ÔºàÁ∞°ÊòìÂÆüË£ÖÔºâ
				setupControls();

				// „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
				setupEventListeners();

				// „É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíÈùûË°®Á§∫
				setTimeout(() => {
					document.getElementById("loading").style.display = "none";
				}, 2000);
			}

			function createStarfield() {
				twinklingStars = []; // ÈÖçÂàó„ÇíÂàùÊúüÂåñ

				// Âü∫Êú¨„ÅÆÊòüÁ©∫ÔºàÈùôÁöÑÔºâ
				const starsGeometry = new THREE.BufferGeometry();
				const starsMaterial = new THREE.PointsMaterial({
					color: 0xffffff,
					size: 2,
					sizeAttenuation: false,
					transparent: true,
					opacity: 0.6,
				});

				const starsVertices = [];
				for (let i = 0; i < 8000; i++) {
					const x = (Math.random() - 0.5) * 3000;
					const y = (Math.random() - 0.5) * 3000;
					const z = (Math.random() - 0.5) * 3000;
					starsVertices.push(x, y, z);
				}

				starsGeometry.setAttribute(
					"position",
					new THREE.Float32BufferAttribute(starsVertices, 3)
				);
				starfield = new THREE.Points(starsGeometry, starsMaterial);
				scene.add(starfield);

				// ÂãïÁöÑ„Å™„Ç≠„É©„Ç≠„É©Êòü
				createTwinklingStars();
			}

			function createTwinklingStars() {
				const colors = [
					0xffffff, // ÁôΩ
					0x88ddff, // Èùí
					0xffaa44, // „Ç™„É¨„É≥„Ç∏
					0xff6666, // Ëµ§
					0x66ff88, // Á∑ë
					0xdd88ff, // Á¥´
					0xffff88, // ÈªÑËâ≤
					0x88ffff, // „Ç∑„Ç¢„É≥
				];

				for (let i = 0; i < 800; i++) {
					const geometry = new THREE.SphereGeometry(0.15, 8, 8);
					const color = colors[Math.floor(Math.random() * colors.length)];
					const material = new THREE.MeshBasicMaterial({
						color: color,
						transparent: true,
						opacity: 0.8,
					});

					const star = new THREE.Mesh(geometry, material);
					star.position.set(
						(Math.random() - 0.5) * 2500,
						(Math.random() - 0.5) * 2500,
						(Math.random() - 0.5) * 2500
					);

					// „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Áî®„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
					star.userData = {
						baseColor: color,
						twinkleSpeed: Math.random() * 3 + 1,
						twinkleOffset: Math.random() * Math.PI * 2,
						intensityVariation: Math.random() * 0.7 + 0.3,
						pulseSpeed: Math.random() * 2 + 0.5,
					};

					scene.add(star);
					twinklingStars.push(star);
				}
			}

			function createCelestialBodies() {
				// ËªåÈÅìÁ∑ö„ÇíÊèèÁîª
				createOrbitLines();

				celestialBodies.forEach((bodyData) => {
					const geometry = new THREE.SphereGeometry(bodyData.radius, 32, 32);

					// „Éó„É≠„Ç∑„Éº„Ç∏„É£„É´„ÉÜ„ÇØ„Çπ„ÉÅ„É£„Çí‰ΩúÊàê
					const texture = createProceduralTexture(bodyData);
					const material = new THREE.MeshBasicMaterial({
						map: texture,
						transparent: false,
					});

					const celestialBody = new THREE.Mesh(geometry, material);

					// ‰ΩçÁΩÆ„ÇíË®≠ÂÆöÔºàÂ§™ÈôΩ‰ª•Â§ñ„ÅØËªåÈÅì‰∏ä„Å´ÈÖçÁΩÆÔºâ
					if (bodyData.name === "Â§™ÈôΩ") {
						celestialBody.position.set(0, 0, 0);
						// Â§™ÈôΩ„ÅÆÁô∫ÂÖâ„Ç®„Éï„Çß„ÇØ„Éà
						const glowGeometry = new THREE.SphereGeometry(
							bodyData.radius * 1.5,
							32,
							32
						);
						const glowMaterial = new THREE.MeshBasicMaterial({
							color: 0xffff00,
							transparent: true,
							opacity: 0.3,
						});
						const glow = new THREE.Mesh(glowGeometry, glowMaterial);
						celestialBody.add(glow);

						// Â§™ÈôΩÂÖâÁ∑ö„Ç®„Éï„Çß„ÇØ„Éà
						createSunRays(celestialBody);
					} else if (bodyData.name === "Êúà") {
						// Âú∞ÁêÉ„ÅÆÂë®„Çä„Å´ÈÖçÁΩÆ
						const earthPosition = celestialObjects.find(
							(obj) => obj.userData.name === "Âú∞ÁêÉ"
						)?.position || { x: 42, y: 0, z: 0 };
						celestialBody.position.set(
							earthPosition.x + 5,
							earthPosition.y,
							earthPosition.z
						);
					} else {
						const angle = Math.random() * Math.PI * 2;
						celestialBody.position.set(
							Math.cos(angle) * bodyData.distance,
							(Math.random() - 0.5) * 5,
							Math.sin(angle) * bodyData.distance
						);
					}

					celestialBody.userData = bodyData;
					celestialObjects.push(celestialBody);
					scene.add(celestialBody);
				});

				// ÂúüÊòü„ÅÆ„É™„É≥„Ç∞„ÇíËøΩÂä†
				const saturnRing = createSaturnRing();
				const saturn = celestialObjects.find(
					(obj) => obj.userData.name === "ÂúüÊòü"
				);
				if (saturn) {
					saturn.add(saturnRing);
				}
			}

			function createOrbitLines() {
				celestialBodies.forEach((bodyData) => {
					if (bodyData.distance > 0 && bodyData.name !== "Êúà") {
						const orbitGeometry = new THREE.RingGeometry(
							bodyData.distance - 0.3,
							bodyData.distance + 0.3,
							64
						);
						const orbitMaterial = new THREE.MeshBasicMaterial({
							color: 0x888888,
							transparent: true,
							opacity: 0.7,
							side: THREE.DoubleSide,
						});
						const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
						orbit.rotation.x = Math.PI / 2;
						scene.add(orbit);
					}
				});
			}

			function createSunRays(sunObject) {
				for (let i = 0; i < 8; i++) {
					const rayGeometry = new THREE.CylinderGeometry(0.1, 0.1, 50, 8);
					const rayMaterial = new THREE.MeshBasicMaterial({
						color: 0xffff00,
						transparent: true,
						opacity: 0.1,
					});
					const ray = new THREE.Mesh(rayGeometry, rayMaterial);

					const angle = (i / 8) * Math.PI * 2;
					ray.position.set(Math.cos(angle) * 15, 0, Math.sin(angle) * 15);
					ray.rotation.z = angle + Math.PI / 2;

					sunObject.add(ray);
				}
			}

			function createSaturnRing() {
				const ringGeometry = new THREE.RingGeometry(7, 12, 32);
				const ringMaterial = new THREE.MeshBasicMaterial({
					color: 0xcccccc,
					transparent: true,
					opacity: 0.6,
					side: THREE.DoubleSide,
				});
				const ring = new THREE.Mesh(ringGeometry, ringMaterial);
				ring.rotation.x = Math.PI / 2;
				return ring;
			}

			function setupControls() {
				let isDragging = false;
				let previousMousePosition = { x: 0, y: 0 };
				let touches = [];
				let lastTouchDistance = 0;
				let lastTouchCenter = { x: 0, y: 0 };

				// „Éû„Ç¶„Çπ„Ç§„Éô„É≥„Éà
				renderer.domElement.addEventListener("mousedown", (e) => {
					if (!isTouch) {
						isDragging = true;
						previousMousePosition = { x: e.clientX, y: e.clientY };
					}
				});

				renderer.domElement.addEventListener("mousemove", (e) => {
					if (isDragging && !isTouch) {
						const deltaMove = {
							x: e.clientX - previousMousePosition.x,
							y: e.clientY - previousMousePosition.y,
						};

						rotateCamera(deltaMove.x * 0.005, deltaMove.y * 0.005);
						previousMousePosition = { x: e.clientX, y: e.clientY };
					}

					// „Éõ„Éê„ÉºÂäπÊûú
					if (!isTouch) {
						updateMousePosition(e);
						checkHover();
					}
				});

				renderer.domElement.addEventListener("mouseup", () => {
					isDragging = false;
				});

				renderer.domElement.addEventListener("wheel", (e) => {
					if (!isTouch) {
						e.preventDefault();
						const zoomSpeed = 0.1;
						zoomCamera(e.deltaY * zoomSpeed * 0.001);
					}
				});

				// „Çø„ÉÉ„ÉÅ„Ç§„Éô„É≥„ÉàÔºàÊìç‰ΩúÁî®Ôºâ
				renderer.domElement.addEventListener(
					"touchstart",
					(e) => {
						onTouchStart(e);

						touches = Array.from(e.touches);

						if (touches.length === 1) {
							// Âçò‰∏Ä„Çø„ÉÉ„ÉÅ - ÂõûËª¢
							isDragging = true;
							previousMousePosition = {
								x: touches[0].clientX,
								y: touches[0].clientY,
							};
						} else if (touches.length === 2) {
							// „ÉÄ„Éñ„É´„Çø„ÉÉ„ÉÅ - „Ç∫„Éº„É†„Å®„Éë„É≥
							isDragging = false;
							lastTouchDistance = getTouchDistance(touches[0], touches[1]);
							lastTouchCenter = getTouchCenter(touches[0], touches[1]);
						}
					},
					{ passive: false }
				);

				renderer.domElement.addEventListener(
					"touchmove",
					(e) => {
						e.preventDefault();
						touches = Array.from(e.touches);

						if (touches.length === 1 && isDragging) {
							// Âçò‰∏Ä„Çø„ÉÉ„ÉÅ - ÂõûËª¢
							const deltaMove = {
								x: touches[0].clientX - previousMousePosition.x,
								y: touches[0].clientY - previousMousePosition.y,
							};

							rotateCamera(deltaMove.x * 0.008, deltaMove.y * 0.008);
							previousMousePosition = {
								x: touches[0].clientX,
								y: touches[0].clientY,
							};
						} else if (touches.length === 2) {
							// „ÉÄ„Éñ„É´„Çø„ÉÉ„ÉÅ - „Éî„É≥„ÉÅ„Ç∫„Éº„É† & „Éë„É≥
							const currentDistance = getTouchDistance(touches[0], touches[1]);
							const currentCenter = getTouchCenter(touches[0], touches[1]);

							// „Éî„É≥„ÉÅ„Ç∫„Éº„É†
							const zoomDelta = (lastTouchDistance - currentDistance) * 0.01;
							zoomCamera(zoomDelta);

							// „Éë„É≥
							const panDelta = {
								x: (currentCenter.x - lastTouchCenter.x) * 0.1,
								y: (currentCenter.y - lastTouchCenter.y) * 0.1,
							};
							panCamera(panDelta.x, panDelta.y);

							lastTouchDistance = currentDistance;
							lastTouchCenter = currentCenter;
						}
					},
					{ passive: false }
				);

				renderer.domElement.addEventListener(
					"touchend",
					(e) => {
						onTouchEnd(e);

						touches = Array.from(e.touches);

						if (touches.length === 0) {
							isDragging = false;
						} else if (touches.length === 1) {
							// 2Êú¨Êåá„Åã„Çâ1Êú¨Êåá„Å´„Å™„Å£„ÅüÂ†¥Âêà
							isDragging = true;
							previousMousePosition = {
								x: touches[0].clientX,
								y: touches[0].clientY,
							};
						}
					},
					{ passive: false }
				);

				function getTouchDistance(touch1, touch2) {
					const dx = touch1.clientX - touch2.clientX;
					const dy = touch1.clientY - touch2.clientY;
					return Math.sqrt(dx * dx + dy * dy);
				}

				function getTouchCenter(touch1, touch2) {
					return {
						x: (touch1.clientX + touch2.clientX) / 2,
						y: (touch1.clientY + touch2.clientY) / 2,
					};
				}

				function rotateCamera(deltaX, deltaY) {
					const spherical = new THREE.Spherical();
					spherical.setFromVector3(camera.position);

					spherical.theta -= deltaX;
					spherical.phi = Math.max(
						0.1,
						Math.min(Math.PI - 0.1, spherical.phi - deltaY)
					);

					camera.position.setFromSpherical(spherical);
					camera.lookAt(scene.position);
				}

				function zoomCamera(delta) {
					const zoomFactor = 1 + delta;
					camera.position.multiplyScalar(zoomFactor);

					// „Ç∫„Éº„É†Âà∂Èôê
					const distance = camera.position.length();
					if (distance < 20) {
						camera.position.normalize().multiplyScalar(20);
					} else if (distance > 500) {
						camera.position.normalize().multiplyScalar(500);
					}
				}

				function panCamera(deltaX, deltaY) {
					const vector = new THREE.Vector3();
					vector.setFromMatrixColumn(camera.matrix, 0); // „Ç´„É°„É©„ÅÆÂè≥ÊñπÂêë
					vector.multiplyScalar(-deltaX);
					camera.position.add(vector);

					vector.setFromMatrixColumn(camera.matrix, 1); // „Ç´„É°„É©„ÅÆ‰∏äÊñπÂêë
					vector.multiplyScalar(deltaY);
					camera.position.add(vector);
				}
			}

			function updateMousePosition(event) {
				mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
				mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
			}

			function checkHover() {
				raycaster.setFromCamera(mouse, camera);
				const intersects = raycaster.intersectObjects(
					celestialObjects.filter(
						(obj) => obj.userData.name && obj.userData.distance !== undefined
					)
				);

				if (intersects.length > 0) {
					const object = intersects[0].object;
					if (object.userData.name) {
						showObjectLabel(object.userData.name, event.clientX, event.clientY);
						document.body.style.cursor = "pointer";
					}
				} else {
					hideObjectLabel();
					document.body.style.cursor = "crosshair";
				}
			}

			function showObjectLabel(name, x, y) {
				objectLabel.textContent = name;
				objectLabel.style.left = x + 10 + "px";
				objectLabel.style.top = y - 30 + "px";
				objectLabel.style.display = "block";
			}

			function hideObjectLabel() {
				objectLabel.style.display = "none";
			}

			function setupEventListeners() {
				// „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„ÉàÔºà„Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÁî®Ôºâ
				renderer.domElement.addEventListener("click", (e) => {
					if (!isTouch) {
						onObjectClick(e);
					}
				});

				// „É¢„Éº„ÉÄ„É´„Ç§„Éô„É≥„Éà
				closeBtn.onclick = () => {
					modal.style.display = "none";
					hideMobilePlanetInfo();
				};
				window.onclick = (event) => {
					if (event.target === modal) {
						modal.style.display = "none";
						hideMobilePlanetInfo();
					}
				};

				// „É™„Çµ„Ç§„Ç∫„Ç§„Éô„É≥„Éà
				window.addEventListener("resize", onWindowResize);
			}

			let touchStartTime = 0;
			let touchObject = null;

			function onTouchStart(event) {
				event.preventDefault();
				isTouch = true;
				touchStartTime = Date.now();

				if (event.touches.length === 1) {
					const touch = event.touches[0];
					updateMousePositionFromTouch(touch);
					raycaster.setFromCamera(mouse, camera);

					const intersects = raycaster.intersectObjects(
						celestialObjects.filter(
							(obj) => obj.userData.name && obj.userData.distance !== undefined
						)
					);

					if (intersects.length > 0) {
						touchObject = intersects[0].object;
						showMobilePlanetInfo(
							touchObject.userData.name,
							touch.clientX,
							touch.clientY
						);
					}
				}
			}

			function onTouchEnd(event) {
				event.preventDefault();
				const touchEndTime = Date.now();
				const touchDuration = touchEndTime - touchStartTime;

				if (touchDuration < 300 && touchObject && event.touches.length === 0) {
					// Áü≠„ÅÑ„Çø„ÉÉ„Éó„Åß„É¢„Éº„ÉÄ„É´Ë°®Á§∫
					showModal(touchObject.userData);
				}

				if (event.touches.length === 0) {
					setTimeout(() => {
						hideMobilePlanetInfo();
					}, 1500);
					touchObject = null;
					isTouch = false;
				}
			}

			function updateMousePositionFromTouch(touch) {
				mouse.x = (touch.clientX / window.innerWidth) * 2 - 1;
				mouse.y = -(touch.clientY / window.innerHeight) * 2 + 1;
			}

			function showMobilePlanetInfo(name, x, y) {
				if (window.innerWidth <= 768) {
					mobilePlanetInfo.textContent = name;
					mobilePlanetInfo.style.display = "block";

					// ÁîªÈù¢Â§ñ„Å´Âá∫„Å™„ÅÑ„Çà„ÅÜ„Å´Ë™øÊï¥
					let left = x - 50;
					let top = y - 60;

					if (left < 10) left = 10;
					if (left > window.innerWidth - 120) left = window.innerWidth - 120;
					if (top < 10) top = 10;
					if (top > window.innerHeight - 80) top = window.innerHeight - 80;

					mobilePlanetInfo.style.left = left + "px";
					mobilePlanetInfo.style.top = top + "px";
					mobilePlanetInfo.style.transform = "none";
				}
			}

			function hideMobilePlanetInfo() {
				mobilePlanetInfo.style.display = "none";
			}

			function onObjectClick(event) {
				updateMousePosition(event);
				raycaster.setFromCamera(mouse, camera);

				const intersects = raycaster.intersectObjects(
					celestialObjects.filter(
						(obj) => obj.userData.name && obj.userData.distance !== undefined
					)
				);

				if (intersects.length > 0) {
					const selectedObj = intersects[0].object;
					showModal(selectedObj.userData);
				}
			}

			function showModal(bodyData) {
				modalTitle.textContent = `${bodyData.name} (${bodyData.type})`;

				let content = `
                <p>${bodyData.description}</p>
                <h3>Âü∫Êú¨„Éá„Éº„Çø</h3>
                <ul class="fact-list">
            `;

				bodyData.facts.forEach((fact) => {
					content += `<li>${fact}</li>`;
				});

				content += "</ul>";
				modalContent.innerHTML = content;

				// 3D„É¢„Éá„É´„Çí‰ΩúÊàê
				create3DModal(bodyData);

				modal.style.display = "block";
			}

			function create3DModal(bodyData) {
				// Êó¢Â≠ò„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Çí„ÇØ„É™„Ç¢
				while (modal3DContainer.firstChild) {
					modal3DContainer.removeChild(modal3DContainer.firstChild);
				}

				// „Éó„É≠„Ç∑„Éº„Ç∏„É£„É´„ÉÜ„ÇØ„Çπ„ÉÅ„É£„Çí‰ΩúÊàê„Åó„Å¶ÁîªÂÉè„Å®„Åó„Å¶Ë°®Á§∫
				const texture = createProceduralTexture(bodyData);

				// Three.js„ÅÆCanvasTexture„Åã„Çâimage„Çí‰ΩúÊàê
				if (texture && texture.image) {
					celestialImage.src = texture.image.toDataURL();
					celestialImage.alt = `${bodyData.name}„ÅÆ„ÉÜ„ÇØ„Çπ„ÉÅ„É£`;
					celestialImage.style.display = "block";
					celestialImage.onload = function () {
						console.log(`${bodyData.name}„ÅÆÁîªÂÉèË™≠„ÅøËæº„ÅøÂÆå‰∫Ü`);
					};
					celestialImage.onerror = function () {
						console.log(`${bodyData.name}„ÅÆÁîªÂÉèË™≠„ÅøËæº„Åø„Ç®„É©„Éº`);
						// „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºö„Ç´„É©„Éº„ÅßÂ°ó„Çä„Å§„Å∂„Åó
						const fallbackCanvas = document.createElement("canvas");
						const fallbackCtx = fallbackCanvas.getContext("2d");
						fallbackCanvas.width = 512;
						fallbackCanvas.height = 256;

						const colorHex = `#${bodyData.color.toString(16).padStart(6, "0")}`;
						fallbackCtx.fillStyle = colorHex;
						fallbackCtx.fillRect(0, 0, 512, 256);

						// Â§©‰ΩìÂêç„ÇíÊèèÁîª
						fallbackCtx.fillStyle = "#ffffff";
						fallbackCtx.font = "24px Arial";
						fallbackCtx.textAlign = "center";
						fallbackCtx.fillText(bodyData.name, 256, 128);

						this.src = fallbackCanvas.toDataURL();
					};
				} else {
					// „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÁîªÂÉè„ÇíÁõ¥Êé•‰ΩúÊàê
					const fallbackCanvas = document.createElement("canvas");
					const fallbackCtx = fallbackCanvas.getContext("2d");
					fallbackCanvas.width = 512;
					fallbackCanvas.height = 256;

					const colorHex = `#${bodyData.color.toString(16).padStart(6, "0")}`;
					fallbackCtx.fillStyle = colorHex;
					fallbackCtx.fillRect(0, 0, 512, 256);

					// Â§©‰ΩìÂêç„ÇíÊèèÁîª
					fallbackCtx.fillStyle = "#ffffff";
					fallbackCtx.font = "32px Arial";
					fallbackCtx.textAlign = "center";
					fallbackCtx.fillText(bodyData.name, 256, 128);

					celestialImage.src = fallbackCanvas.toDataURL();
					celestialImage.style.display = "block";
				}

				// „É°„Ç§„É≥ÁîªÈù¢„Å®Âêå„Åò3D„É¢„Éá„É´„Çí‰ΩúÊàêÔºà‰∏ãÈÉ®Ôºâ
				modalScene = new THREE.Scene();
				modalCamera = new THREE.PerspectiveCamera(75, 250 / 120, 0.1, 1000);
				modalRenderer = new THREE.WebGLRenderer({
					antialias: true,
					alpha: true,
				});
				modalRenderer.setSize(250, 120);
				modalRenderer.setClearColor(0x000011, 1);
				modal3DContainer.appendChild(modalRenderer.domElement);

				// Â§©‰Ωì„ÅÆ3D„É¢„Éá„É´„Çí‰ΩúÊàêÔºà„Éó„É≠„Ç∑„Éº„Ç∏„É£„É´„ÉÜ„ÇØ„Çπ„ÉÅ„É£‰ΩøÁî®Ôºâ
				const geometry = new THREE.SphereGeometry(1.5, 32, 32);
				const material = new THREE.MeshBasicMaterial({
					map: createProceduralTexture(bodyData),
					transparent: false,
				});

				const modalPlanet = new THREE.Mesh(geometry, material);
				modalScene.add(modalPlanet);

				// Â§™ÈôΩ„ÅÆÁâπÂà•„Ç®„Éï„Çß„ÇØ„Éà
				if (bodyData.name === "Â§™ÈôΩ") {
					// Áô∫ÂÖâ„Ç®„Éï„Çß„ÇØ„Éà
					const glowGeometry = new THREE.SphereGeometry(1.8, 32, 32);
					const glowMaterial = new THREE.MeshBasicMaterial({
						color: 0xffff00,
						transparent: true,
						opacity: 0.3,
					});
					const glow = new THREE.Mesh(glowGeometry, glowMaterial);
					modalScene.add(glow);

					// Â§™ÈôΩÂÖâÁ∑ö„Ç®„Éï„Çß„ÇØ„Éà
					for (let i = 0; i < 8; i++) {
						const rayGeometry = new THREE.CylinderGeometry(0.02, 0.02, 15, 8);
						const rayMaterial = new THREE.MeshBasicMaterial({
							color: 0xffff00,
							transparent: true,
							opacity: 0.1,
						});
						const ray = new THREE.Mesh(rayGeometry, rayMaterial);

						const angle = (i / 8) * Math.PI * 2;
						ray.position.set(Math.cos(angle) * 5, 0, Math.sin(angle) * 5);
						ray.rotation.z = angle + Math.PI / 2;

						modalScene.add(ray);
					}
				}

				// ÂúüÊòü„ÅÆ„É™„É≥„Ç∞
				if (bodyData.name === "ÂúüÊòü") {
					const ringGeometry = new THREE.RingGeometry(2.2, 3.2, 32);
					const ringMaterial = new THREE.MeshBasicMaterial({
						color: 0xcccccc,
						transparent: true,
						opacity: 0.6,
						side: THREE.DoubleSide,
					});
					const ring = new THREE.Mesh(ringGeometry, ringMaterial);
					ring.rotation.x = Math.PI / 2;
					modalPlanet.add(ring);
				}

				// ËÉåÊôØ„Å´Êòü„ÇíËøΩÂä†
				addModalStarfield();

				// „Ç´„É°„É©„ÅÆ‰ΩçÁΩÆË®≠ÂÆö
				modalCamera.position.set(0, 0.5, 3.5);
				modalCamera.lookAt(modalScene.position);

				// „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„É´„Éº„Éó
				let modalAnimationId;
				function animateModal() {
					if (modal.style.display === "block") {
						modalAnimationId = requestAnimationFrame(animateModal);

						const time = Date.now() * 0.001;

						// Â§©‰Ωì„ÅÆÂõûËª¢
						if (bodyData.name === "Â§™ÈôΩ") {
							modalPlanet.rotation.y += 0.005;
							// Â§™ÈôΩÂÖâÁ∑ö„ÅÆÂõûËª¢
							modalScene.children.forEach((child) => {
								if (
									child.geometry &&
									child.geometry.type === "CylinderGeometry"
								) {
									child.rotation.z += 0.01;
								}
							});
						} else {
							modalPlanet.rotation.y += 0.01;
						}

						// „Ç´„É°„É©„ÅÆÂæÆÂ¶ô„Å™Âãï„Åç
						modalCamera.position.x = Math.sin(time * 0.5) * 0.3;
						modalCamera.position.y = 0.5 + Math.cos(time * 0.3) * 0.1;
						modalCamera.lookAt(modalScene.position);

						modalRenderer.render(modalScene, modalCamera);
					} else {
						cancelAnimationFrame(modalAnimationId);
					}
				}
				animateModal();
			}

			function addModalStarfield() {
				// „É¢„Éº„ÉÄ„É´Áî®„ÅÆÂ∞è„Åï„Å™ÊòüÁ©∫„Çí‰ΩúÊàê
				const starsGeometry = new THREE.BufferGeometry();
				const starsMaterial = new THREE.PointsMaterial({
					color: 0xffffff,
					size: 1,
					sizeAttenuation: false,
					transparent: true,
					opacity: 0.6,
				});

				const starsVertices = [];
				for (let i = 0; i < 200; i++) {
					const x = (Math.random() - 0.5) * 50;
					const y = (Math.random() - 0.5) * 50;
					const z = (Math.random() - 0.5) * 50;
					starsVertices.push(x, y, z);
				}

				starsGeometry.setAttribute(
					"position",
					new THREE.Float32BufferAttribute(starsVertices, 3)
				);
				const stars = new THREE.Points(starsGeometry, starsMaterial);
				modalScene.add(stars);

				// „Ç≠„É©„Ç≠„É©Êòü„ÇÇËøΩÂä†
				const colors = [0xffffff, 0x88ddff, 0xffaa44, 0xff6666, 0x66ff88];
				for (let i = 0; i < 20; i++) {
					const geometry = new THREE.SphereGeometry(0.05, 8, 8);
					const color = colors[Math.floor(Math.random() * colors.length)];
					const material = new THREE.MeshBasicMaterial({
						color: color,
						transparent: true,
						opacity: 0.6,
					});

					const star = new THREE.Mesh(geometry, material);
					star.position.set(
						(Math.random() - 0.5) * 40,
						(Math.random() - 0.5) * 40,
						(Math.random() - 0.5) * 40
					);

					modalScene.add(star);
				}
			}

			function create3DModelFallback(bodyData) {
				// „É¢„Éº„ÉÄ„É´Áî®„ÅÆ3D„Ç∑„Éº„É≥„Çí‰ΩúÊàê
				modalScene = new THREE.Scene();
				modalCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
				modalRenderer = new THREE.WebGLRenderer({
					antialias: true,
					alpha: true,
				});
				modalRenderer.setSize(250, 250);
				modalRenderer.setClearColor(0x000011, 1);
				modal3DContainer.appendChild(modalRenderer.domElement);

				// Â§©‰Ωì„ÅÆ3D„É¢„Éá„É´„Çí‰ΩúÊàê
				const geometry = new THREE.SphereGeometry(2, 32, 32);
				let material;

				if (bodyData.name === "Â§™ÈôΩ") {
					material = new THREE.MeshBasicMaterial({
						color: bodyData.color,
						transparent: true,
					});

					// Â§™ÈôΩ„ÅÆÁô∫ÂÖâ„Ç®„Éï„Çß„ÇØ„Éà
					const glowGeometry = new THREE.SphereGeometry(2.5, 32, 32);
					const glowMaterial = new THREE.MeshBasicMaterial({
						color: 0xffff00,
						transparent: true,
						opacity: 0.3,
					});
					const glow = new THREE.Mesh(glowGeometry, glowMaterial);
					modalScene.add(glow);
				} else {
					material = new THREE.MeshBasicMaterial({
						color: bodyData.color,
						transparent: true,
					});
				}

				const modalPlanet = new THREE.Mesh(geometry, material);
				modalScene.add(modalPlanet);

				// ÂúüÊòü„ÅÆÂ†¥Âêà„ÅØ„É™„É≥„Ç∞„ÇíËøΩÂä†
				if (bodyData.name === "ÂúüÊòü") {
					const ringGeometry = new THREE.RingGeometry(3, 4.5, 32);
					const ringMaterial = new THREE.MeshBasicMaterial({
						color: 0xcccccc,
						transparent: true,
						opacity: 0.6,
						side: THREE.DoubleSide,
					});
					const ring = new THREE.Mesh(ringGeometry, ringMaterial);
					ring.rotation.x = Math.PI / 2;
					modalPlanet.add(ring);
				}

				// „Ç´„É°„É©„ÅÆ‰ΩçÁΩÆË®≠ÂÆö
				modalCamera.position.set(0, 1, 5);
				modalCamera.lookAt(modalScene.position);

				// „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„É´„Éº„Éó
				function animateModal() {
					if (modal.style.display === "block") {
						requestAnimationFrame(animateModal);
						modalPlanet.rotation.y += 0.02;
						modalRenderer.render(modalScene, modalCamera);
					}
				}
				animateModal();
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			}

			function animate() {
				requestAnimationFrame(animate);

				const time = Date.now() * 0.001;

				// ÂãïÁöÑ„Å™Êòü„ÅÆ„Ç≠„É©„Ç≠„É©„Ç®„Éï„Çß„ÇØ„Éà
				twinklingStars.forEach((star) => {
					const userData = star.userData;

					// „É©„É≥„ÉÄ„É†„Å™Âº∑Â∫¶Â§âÂåñ
					const twinkle =
						Math.sin(time * userData.twinkleSpeed + userData.twinkleOffset) *
							userData.intensityVariation +
						0.5;
					const pulse =
						Math.sin(time * userData.pulseSpeed + userData.twinkleOffset * 2) *
							0.3 +
						0.7;

					// ÂÖâÈáè„Çí„É©„É≥„ÉÄ„É†„Å´Â§âÂåñ
					star.material.opacity = twinkle * pulse;

					// Ëâ≤„ÅÆËºùÂ∫¶„ÇÇ„É©„É≥„ÉÄ„É†„Å´Â§âÂåñ
					const brightness = (twinkle + pulse) / 2;
					const color = new THREE.Color(userData.baseColor);
					color.multiplyScalar(brightness + 0.3);
					star.material.color = color;

					// „Çµ„Ç§„Ç∫„ÇÇÂæÆÂ¶ô„Å´Â§âÂåñ
					const sizeVariation = 1 + (twinkle - 0.5) * 0.3;
					star.scale.setScalar(sizeVariation);
				});

				// Â§©‰Ωì„ÅÆÂõûËª¢„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
				celestialObjects.forEach((obj) => {
					if (obj.userData.name === "Â§™ÈôΩ") {
						obj.rotation.y += 0.005;
						// Â§™ÈôΩ„ÅÆÂÖâÁ∑ö„ÇÇÂõûËª¢
						obj.children.forEach((child) => {
							if (
								child.geometry &&
								child.geometry.type === "CylinderGeometry"
							) {
								child.rotation.z += 0.01;
							}
						});
					} else if (obj.userData.name && obj.userData.distance !== undefined) {
						obj.rotation.y += 0.01;
						// ËªåÈÅìÈÅãÂãï
						const distance = obj.userData.distance;
						if (distance > 0 && obj.userData.name !== "Êúà") {
							obj.position.x =
								Math.cos(time * 0.1 * (1 / Math.sqrt(distance))) * distance;
							obj.position.z =
								Math.sin(time * 0.1 * (1 / Math.sqrt(distance))) * distance;
						} else if (obj.userData.name === "Êúà") {
							// Êúà„ÅØÂú∞ÁêÉ„ÅÆÂë®„Çä„ÇíÂõû„Çã
							const earth = celestialObjects.find(
								(o) => o.userData.name === "Âú∞ÁêÉ"
							);
							if (earth) {
								obj.position.x = earth.position.x + Math.cos(time * 2) * 5;
								obj.position.z = earth.position.z + Math.sin(time * 2) * 5;
							}
						}
					}
				});

				// „Ç´„É°„É©„ÇíÂ∏∏„Å´‰∏≠ÂøÉ„ÇíÂêë„Åã„Åõ„Çã
				camera.lookAt(scene.position);

				renderer.render(scene, camera);
			}
		</script>
	</body>
</html>
