<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÈäÄÊ≤≥Á≥ªÊé¢Á¥¢„Ç¢„Éó„É™</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: #000;
            color: #fff;
            overflow: hidden;
            cursor: crosshair;
        }
        
        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        #info {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(0, 20, 40, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            backdrop-filter: blur(5px);
        }
        
        #info h1 {
            color: #00ffff;
            font-size: 18px;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #00ffff;
        }
        
        #info p {
            font-size: 12px;
            color: #ccc;
            line-height: 1.4;
        }
        
        #controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(0, 20, 40, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #00ffff;
            backdrop-filter: blur(5px);
        }
        
        #controls h3 {
            color: #00ffff;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        #controls p {
            font-size: 11px;
            color: #ccc;
            margin-bottom: 5px;
        }
        
        #modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #001122 0%, #003366 100%);
            margin: 5% auto;
            padding: 30px;
            border: 2px solid #00ffff;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.5);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .close {
            color: #00ffff;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .close:hover {
            color: #ffffff;
            text-shadow: 0 0 10px #00ffff;
        }
        
        .modal-header h2 {
            color: #00ffff;
            font-size: 24px;
            margin-bottom: 20px;
            text-shadow: 0 0 15px #00ffff;
        }
        
        .modal-body {
            color: #ccc;
            line-height: 1.6;
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        
        .modal-text {
            flex: 1;
        }
        
        .modal-3d {
            flex: 0 0 250px;
            height: 250px;
            border: 2px solid #00ffff;
            border-radius: 10px;
            background: #000011;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-3d canvas {
            border-radius: 8px;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        .celestial-image {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover;
            border-radius: 8px;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
            animation: planetRotate 20s linear infinite;
            transform-origin: center center;
            filter: brightness(1.1) contrast(1.1) saturate(1.2);
            transition: all 0.3s ease;
        }
        
        .celestial-image:hover {
            transform: scale(1.05);
            filter: brightness(1.3) contrast(1.2) saturate(1.4);
        }
        
        .celestial-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 255, 255, 0.8);
            border: 1px solid #00ffff;
            color: #000;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            z-index: 20;
            font-family: 'Orbitron', monospace;
            transition: all 0.3s ease;
        }
        
        .celestial-toggle:hover {
            background: rgba(0, 255, 255, 1);
            transform: scale(1.05);
        }
        
        .planet-label {
            position: absolute;
            background: rgba(0, 255, 255, 0.9);
            color: #000;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            font-family: 'Orbitron', monospace;
            pointer-events: none;
            z-index: 200;
            backdrop-filter: blur(3px);
            border: 1px solid #00ffff;
            display: none;
            animation: labelFadeIn 0.3s ease-out;
            text-shadow: none;
        }
        
        @keyframes labelFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        @keyframes planetRotate {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.02); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.02); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .sun-image {
            animation: sunPulse 3s ease-in-out infinite alternate !important;
        }
        
        @keyframes sunPulse {
            0% { 
                transform: rotate(0deg) scale(1);
                filter: brightness(1.2) contrast(1.1) saturate(1.3) drop-shadow(0 0 20px #ffff00);
            }
            100% { 
                transform: rotate(360deg) scale(1.05);
                filter: brightness(1.5) contrast(1.3) saturate(1.5) drop-shadow(0 0 30px #ffaa00);
            }
        }
        
        .earth-image {
            animation: earthRotate 15s linear infinite, earthGlow 4s ease-in-out infinite alternate !important;
        }
        
        @keyframes earthRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes earthGlow {
            0% { 
                filter: brightness(1.1) contrast(1.1) saturate(1.3) drop-shadow(0 0 15px #4a90e2);
            }
            100% { 
                filter: brightness(1.3) contrast(1.2) saturate(1.4) drop-shadow(0 0 25px #6bb6ff);
            }
        }
        
        .saturn-image {
            animation: saturnWobble 8s ease-in-out infinite !important;
        }
        
        @keyframes saturnWobble {
            0%, 100% { 
                transform: rotate(0deg) scale(1);
                filter: brightness(1.1) contrast(1.1) saturate(1.2);
            }
            25% { 
                transform: rotate(5deg) scale(1.02);
                filter: brightness(1.2) contrast(1.15) saturate(1.3);
            }
            50% { 
                transform: rotate(0deg) scale(1.01);
                filter: brightness(1.15) contrast(1.12) saturate(1.25);
            }
            75% { 
                transform: rotate(-5deg) scale(1.02);
                filter: brightness(1.2) contrast(1.15) saturate(1.3);
            }
        }
        
        .gas-giant {
            animation: gasGiantSwirl 12s ease-in-out infinite !important;
        }
        
        @keyframes gasGiantSwirl {
            0% { 
                transform: rotate(0deg) scale(1);
                filter: brightness(1.1) contrast(1.1) saturate(1.2) hue-rotate(0deg);
            }
            33% { 
                transform: rotate(120deg) scale(1.03);
                filter: brightness(1.25) contrast(1.2) saturate(1.4) hue-rotate(10deg);
            }
            66% { 
                transform: rotate(240deg) scale(1.01);
                filter: brightness(1.15) contrast(1.15) saturate(1.3) hue-rotate(-10deg);
            }
            100% { 
                transform: rotate(360deg) scale(1);
                filter: brightness(1.1) contrast(1.1) saturate(1.2) hue-rotate(0deg);
            }
        }
        
        .rocky-planet {
            animation: rockyPlanetRotate 10s linear infinite, rockyGlow 6s ease-in-out infinite alternate !important;
        }
        
        @keyframes rockyPlanetRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes rockyGlow {
            0% { 
                filter: brightness(1.0) contrast(1.1) saturate(1.1);
            }
            100% { 
                filter: brightness(1.2) contrast(1.2) saturate(1.3);
            }
        }
        
        .moon-image {
            animation: moonPhases 8s ease-in-out infinite !important;
        }
        
        @keyframes moonPhases {
            0%, 100% { 
                transform: rotate(0deg) scale(1);
                filter: brightness(1.0) contrast(1.1) saturate(0.9);
            }
            25% { 
                transform: rotate(90deg) scale(1.02);
                filter: brightness(1.1) contrast(1.15) saturate(1.0);
            }
            50% { 
                transform: rotate(180deg) scale(1.01);
                filter: brightness(1.2) contrast(1.2) saturate(1.1);
            }
            75% { 
                transform: rotate(270deg) scale(1.02);
                filter: brightness(1.1) contrast(1.15) saturate(1.0);
            }
        }
        
        .modal-body h3 {
            color: #00aaff;
            margin: 20px 0 10px 0;
            font-size: 18px;
        }
        
        .fact-list {
            list-style: none;
            padding-left: 0;
        }
        
        .fact-list li {
            background: rgba(0, 255, 255, 0.1);
            margin: 8px 0;
            padding: 10px;
            border-left: 3px solid #00ffff;
            border-radius: 5px;
        }
        
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 999;
            text-align: center;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(0, 255, 255, 0.3);
            border-top: 3px solid #00ffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        #object-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: #00ffff;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            border: 1px solid #00ffff;
            display: none;
            z-index: 200;
            backdrop-filter: blur(3px);
        }
        
        @media (max-width: 768px) {
            #info, #controls {
                display: none;
            }
            
            .modal-content {
                margin: 10% auto;
                width: 95%;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div id="loading">
        <div class="loading-spinner"></div>
        <p style="color: #00ffff;">ÈäÄÊ≤≥Á≥ª„ÇíË™≠„ÅøËæº„Åø‰∏≠...</p>
    </div>
    
    <div id="container"></div>
    
    <div id="info">
        <h1>üåå ÈäÄÊ≤≥Á≥ªÊé¢Á¥¢„Ç¢„Éó„É™</h1>
        <p>„Éû„Ç¶„Çπ„ÅßÂÆáÂÆô„ÇíÊé¢Á¥¢„Åó„ÄÅ<br>Â§©‰Ωì„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Ë©≥Á¥∞„ÇíÁ¢∫Ë™ç„Åó„Çà„ÅÜÔºÅ</p>
    </div>
    
    <div id="controls">
        <h3>Êìç‰ΩúÊñπÊ≥ï</h3>
        <p>üñ±Ô∏è „Éâ„É©„ÉÉ„Ç∞: ÂõûËª¢</p>
        <p>üéØ „Éõ„Ç§„Éº„É´: „Ç∫„Éº„É†</p>
        <p>üëÜ „ÇØ„É™„ÉÉ„ÇØ: Â§©‰ΩìË©≥Á¥∞</p>
    </div>
    
    <div id="object-label"></div>
    <div id="planet-label" class="planet-label"></div>
    
    <div id="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="modal-header">
                <h2 id="modal-title">Â§©‰ΩìÂêç</h2>
            </div>
            <div class="modal-body">
                <div class="modal-text">
                    <div id="modal-content"></div>
                </div>
                <div class="modal-3d" id="modal-3d-container">
                    <img id="celestial-image" class="celestial-image" style="display: none;" alt="Â§©‰ΩìÁîªÂÉè">
                    <button id="toggle-view" class="celestial-toggle">3DË°®Á§∫</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Â§©‰Ωì„Éá„Éº„Çø
        const celestialBodies = [
            {
                name: "Â§™ÈôΩ",
                type: "ÊÅíÊòü",
                radius: 10,
                distance: 0,
                color: 0xffff00,
                imageUrl: "https://images.unsplash.com/photo-1614642264762-908ec80756da?w=400",
                description: "Â§™ÈôΩÁ≥ª„ÅÆ‰∏≠ÂøÉ„Å´„ÅÇ„ÇãÊÅíÊòü„Åß„ÄÅÂú∞ÁêÉ„Å´ÂÖâ„Å®ÁÜ±„ÇíÊèê‰æõ„Åó„Å¶„ÅÑ„ÇãÂ∑®Â§ß„Å™Ê†∏ËûçÂêàÁÇâ„Åß„Åô„ÄÇ",
                facts: [
                    "Ë°®Èù¢Ê∏©Â∫¶: Á¥Ñ5,778K (5,505¬∞C)",
                    "Ë≥™Èáè: Âú∞ÁêÉ„ÅÆÁ¥Ñ333,000ÂÄç",
                    "Áõ¥ÂæÑ: Âú∞ÁêÉ„ÅÆÁ¥Ñ109ÂÄç",
                    "Âπ¥ÈΩ¢: Á¥Ñ46ÂÑÑÂπ¥",
                    "ÁµÑÊàê: Ê∞¥Á¥†73%„ÄÅ„Éò„É™„Ç¶„É†25%"
                ]
            },
            {
                name: "Ê∞¥Êòü",
                type: "ÊÉëÊòü",
                radius: 1.5,
                distance: 20,
                color: 0x8c7853,
                imageUrl: "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400",
                description: "Â§™ÈôΩ„Å´ÊúÄ„ÇÇËøë„ÅÑÊÉëÊòü„Åß„ÄÅÊ•µÁ´Ø„Å™Ê∏©Â∫¶Â∑Æ„ÅåÁâπÂæ¥ÁöÑ„Å™Â∞è„Åï„Å™Â≤©Áü≥ÊÉëÊòü„Åß„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ5,790‰∏ákm",
                    "ÂÖ¨Ëª¢Âë®Êúü: 88Êó•",
                    "Ëá™Ëª¢Âë®Êúü: 59Êó•",
                    "Ë°®Èù¢Ê∏©Â∫¶: -170¬∞C„Äú430¬∞C",
                    "Â§ßÊ∞ó: „Åª„ÅºÁúüÁ©∫Áä∂ÊÖã"
                ]
            },
            {
                name: "ÈáëÊòü",
                type: "ÊÉëÊòü",
                radius: 2.3,
                distance: 30,
                color: 0xffc649,
                imageUrl: "https://images.unsplash.com/photo-1446776558166-79d2b5a625e2?w=400",
                description: "Âú∞ÁêÉ„ÅÆ„ÄåÂèåÂ≠êÊòü„Äç„Å®Âëº„Å∞„Çå„ÇãÊÉëÊòü„Åß„ÄÅÊøÉÂéö„Å™Â§ßÊ∞ó„Å´„Çà„ÇãÊ∏©ÂÆ§ÂäπÊûú„ÅßÈùûÂ∏∏„Å´È´òÊ∏©„Åß„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ1ÂÑÑ800‰∏ákm",
                    "ÂÖ¨Ëª¢Âë®Êúü: 225Êó•",
                    "Ë°®Èù¢Ê∏©Â∫¶: Á¥Ñ460¬∞C",
                    "Â§ßÊ∞óÂúß: Âú∞ÁêÉ„ÅÆÁ¥Ñ90ÂÄç",
                    "ÈÄÜÂõûËª¢„Åô„ÇãÂîØ‰∏Ä„ÅÆÊÉëÊòü"
                ]
            },
            {
                name: "Âú∞ÁêÉ",
                type: "ÊÉëÊòü",
                radius: 2.5,
                distance: 42,
                color: 0x6b93d6,
                imageUrl: "https://images.unsplash.com/photo-1614730321146-b6fa6a46bcb4?w=400",
                description: "ÁßÅ„Åü„Å°„ÅÆÊïÖÈÉ∑„Åß„ÅÇ„ÇãÁæé„Åó„ÅÑÈùí„ÅÑÊÉëÊòü„ÄÇÁîüÂëΩ„ÅåÂ≠òÂú®„Åô„ÇãÂîØ‰∏ÄÁü•„Çâ„Çå„ÅüÂ§©‰Ωì„Åß„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ1ÂÑÑ4,960‰∏ákm",
                    "ÂÖ¨Ëª¢Âë®Êúü: 365.25Êó•",
                    "Ë°®Èù¢„ÅÆ71%„ÅåÊµ∑Ê¥ã",
                    "Â§ßÊ∞óÁµÑÊàê: Á™íÁ¥†78%„ÄÅÈÖ∏Á¥†21%",
                    "ÂîØ‰∏ÄÁ¢∫Ë™ç„Åï„Çå„ÅüÁîüÂëΩÂ≠òÂú®ÊÉëÊòü"
                ]
            },
            {
                name: "Êúà",
                type: "Ë°õÊòü",
                radius: 0.8,
                distance: 47,
                color: 0xc0c0c0,
                imageUrl: "https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=400",
                description: "Âú∞ÁêÉ„ÅÆÂîØ‰∏Ä„ÅÆÂ§©ÁÑ∂Ë°õÊòü„Åß„ÄÅÂú∞ÁêÉ„ÅÆÊΩÆÊ±ê„ÇÑËá™Ëª¢„Å´Â§ß„Åç„Å™ÂΩ±Èüø„Çí‰∏é„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
                facts: [
                    "Âú∞ÁêÉ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ38‰∏ákm",
                    "Áõ¥ÂæÑ: Âú∞ÁêÉ„ÅÆÁ¥Ñ1/4",
                    "ÂÖ¨Ëª¢Âë®Êúü: Á¥Ñ27.3Êó•",
                    "ÂêåÊúüÂõûËª¢ÔºàÂ∏∏„Å´Âêå„ÅòÈù¢„ÇíÂú∞ÁêÉ„Å´Âêë„Åë„ÇãÔºâ",
                    "„Ç¢„Éù„É≠Ë®àÁîª„Åß‰∫∫È°û„ÅåÂà∞ÈÅî"
                ]
            },
            {
                name: "ÁÅ´Êòü",
                type: "ÊÉëÊòü",
                radius: 2.0,
                distance: 60,
                color: 0xcd5c5c,
                imageUrl: "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400",
                description: "„ÄåËµ§„ÅÑÊÉëÊòü„Äç„Å®„Åó„Å¶Áü•„Çâ„Çå„ÄÅÂ∞ÜÊù•„ÅÆ‰∫∫È°ûÁßª‰ΩèÂÄôË£ú„Å®„Åó„Å¶Ê≥®ÁõÆ„Åï„Çå„ÇãÊÉëÊòü„Åß„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ2ÂÑÑ2,790‰∏ákm",
                    "ÂÖ¨Ëª¢Âë®Êúü: 687Êó•",
                    "1Êó•: 24ÊôÇÈñì37ÂàÜ",
                    "Ê•µÂÜ†„Å´Ê∞∑„ÅåÂ≠òÂú®",
                    "Â§™ÈôΩÁ≥ªÊúÄÂ§ß„ÅÆÁÅ´Â±±„Ç™„É™„É≥„Éù„ÇπÂ±±„Åå„ÅÇ„Çã"
                ]
            },
            {
                name: "Êú®Êòü",
                type: "ÊÉëÊòü",
                radius: 6.0,
                distance: 85,
                color: 0xffa500,
                imageUrl: "https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=400",
                description: "Â§™ÈôΩÁ≥ªÊúÄÂ§ß„ÅÆ„Ç¨„ÇπÊÉëÊòü„Åß„ÄÅÂ§ßËµ§Êñë„Å®Âëº„Å∞„Çå„ÇãÂ∑®Â§ß„Å™Âµê„ÅåÁâπÂæ¥ÁöÑ„Åß„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ7ÂÑÑ7,830‰∏ákm",
                    "Ë≥™Èáè: Âú∞ÁêÉ„ÅÆÁ¥Ñ318ÂÄç",
                    "Ë°õÊòüÊï∞: 95ÂÄã‰ª•‰∏ä",
                    "Â§ßËµ§Êñë: Âú∞ÁêÉ2-3ÂÄãÂàÜ„ÅÆÂ§ß„Åç„Åï„ÅÆÂµê",
                    "‰∏ªÊàêÂàÜ: Ê∞¥Á¥†„Å®„Éò„É™„Ç¶„É†"
                ]
            },
            {
                name: "ÂúüÊòü",
                type: "ÊÉëÊòü",
                radius: 5.2,
                distance: 110,
                color: 0xffb347,
                imageUrl: "https://images.unsplash.com/photo-1446776708417-3aabf90b64be?w=400",
                description: "Áæé„Åó„ÅÑ„É™„É≥„Ç∞„ÅßÊúâÂêç„Å™„Ç¨„ÇπÊÉëÊòü„Åß„ÄÅÂØÜÂ∫¶„ÅåÊ∞¥„Çà„Çä‰Ωé„ÅÑÂîØ‰∏Ä„ÅÆÊÉëÊòü„Åß„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ14ÂÑÑ2,700‰∏ákm",
                    "ÂØÜÂ∫¶: 0.687g/cm¬≥ÔºàÊ∞¥„Çà„ÇäËªΩ„ÅÑÔºâ",
                    "„É™„É≥„Ç∞: Ê∞∑„Å®Â≤©Áü≥„ÅÆÁ≤íÂ≠ê„ÅßÊßãÊàê",
                    "Ë°õÊòüÊï∞: 146ÂÄã‰ª•‰∏ä",
                    "ÊúÄÂ§ß„ÅÆË°õÊòü„Çø„Ç§„Çø„É≥„ÅØÂ§ßÊ∞ó„ÇíÊåÅ„Å§"
                ]
            },
            {
                name: "Â§©ÁéãÊòü",
                type: "ÊÉëÊòü",
                radius: 3.8,
                distance: 140,
                color: 0x40e0d0,
                imageUrl: "https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=400",
                description: "Ê®™ÂÄí„Åó„Å´ÂõûËª¢„Åô„ÇãÊ∞∑ÊÉëÊòü„Åß„ÄÅ„É°„Çø„É≥„Å´„Çà„ÇäÁæé„Åó„ÅÑÈùíÁ∑ëËâ≤„ÇíÂëà„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ28ÂÑÑ7,500‰∏ákm",
                    "Ëá™Ëª¢Ëª∏„ÅÆÂÇæ„Åç: 98Â∫¶ÔºàÊ®™ÂÄí„ÅóÔºâ",
                    "ÂÖ¨Ëª¢Âë®Êúü: 84Âπ¥",
                    "„É™„É≥„Ç∞: Êöó„Åè„Å¶Á¥∞„ÅÑ",
                    "Â§ßÊ∞ó: Ê∞¥Á¥†„ÄÅ„Éò„É™„Ç¶„É†„ÄÅ„É°„Çø„É≥"
                ]
            },
            {
                name: "Êµ∑ÁéãÊòü",
                type: "ÊÉëÊòü",
                radius: 3.6,
                distance: 170,
                color: 0x0066cc,
                imageUrl: "https://images.unsplash.com/photo-1446776558166-79d2b5a625e2?w=400",
                description: "Â§™ÈôΩÁ≥ªÊúÄÈÅ†„ÅÆÊÉëÊòü„Åß„ÄÅÊúÄ„ÇÇÂº∑„ÅÑÈ¢®„ÅåÂêπ„ÅèÁæé„Åó„ÅÑÈùí„ÅÑÊ∞∑ÊÉëÊòü„Åß„Åô„ÄÇ",
                facts: [
                    "Â§™ÈôΩ„Åã„Çâ„ÅÆË∑ùÈõ¢: Á¥Ñ45ÂÑÑkm",
                    "ÂÖ¨Ëª¢Âë®Êúü: 165Âπ¥",
                    "È¢®ÈÄü: ÊúÄÈ´ò2,100km/h",
                    "Â§ßÊöóÊñë: Êú®Êòü„ÅÆÂ§ßËµ§Êñë„Å´‰ºº„ÅüÂµê",
                    "Áô∫Ë¶ã: Êï∞Â≠¶ÁöÑ‰∫àÊ∏¨„Å´„Çà„ÇäÁô∫Ë¶ã"
                ]
            }
        ];

        // Three.js „Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
        let scene, camera, renderer, controls;
        let celestialObjects = [];
        let raycaster, mouse;
        let selectedObject = null;
        let modalScene, modalCamera, modalRenderer;
        let twinklingStars = [];
        let starfield;
        
        // „É¢„Éº„ÉÄ„É´Ë¶ÅÁ¥†
        // „É¢„Éº„ÉÄ„É´Ë¶ÅÁ¥†ÔºàÂàùÊúüÂåñ„ÇíÈÅÖÂª∂„Åï„Åõ„ÇãÔºâ
        let modal, modalTitle, modalContent, modal3DContainer, celestialImage, toggleViewBtn, closeBtn, objectLabel, planetLabel;

        init();
        animate();

        function init() {
            // DOMË¶ÅÁ¥†„ÇíÂàùÊúüÂåñ
            initDOMElements();
            
            // „Ç∑„Éº„É≥„ÅÆ‰ΩúÊàê
            scene = new THREE.Scene();
            
            // „Ç´„É°„É©„ÅÆ‰ΩúÊàê
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 30, 100);

            // „É¨„É≥„ÉÄ„É©„Éº„ÅÆ‰ΩúÊàê
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000011);
            document.getElementById('container').appendChild(renderer.domElement);

            // „É¨„Ç§„Ç≠„É£„Çπ„Çø„Éº„Å®„Éû„Ç¶„Çπ„ÅÆÂàùÊúüÂåñ
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // ÊòüÁ©∫„ÅÆËÉåÊôØ„Çí‰ΩúÊàê
            createStarfield();
            
            // Â§©‰Ωì„Çí‰ΩúÊàê
            createCelestialBodies();
            
            // OrbitControls ÔºàÁ∞°ÊòìÂÆüË£ÖÔºâ
            setupControls();
            
            // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            setupEventListeners();
            
            // „É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíÈùûË°®Á§∫
            setTimeout(() => {
                const loading = document.getElementById('loading');
                if (loading) loading.style.display = 'none';
            }, 2000);
        }
        
        function initDOMElements() {
            modal = document.getElementById('modal');
            modalTitle = document.getElementById('modal-title');
            modalContent = document.getElementById('modal-content');
            modal3DContainer = document.getElementById('modal-3d-container');
            celestialImage = document.getElementById('celestial-image');
            toggleViewBtn = document.getElementById('toggle-view');
            closeBtn = document.getElementsByClassName('close')[0];
            objectLabel = document.getElementById('object-label');
            planetLabel = document.getElementById('planet-label');
        }

        function createStarfield() {
            twinklingStars = []; // ÈÖçÂàó„ÇíÂàùÊúüÂåñ
            
            // Âü∫Êú¨„ÅÆÊòüÁ©∫ÔºàÈùôÁöÑÔºâ
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({ 
                color: 0xffffff, 
                size: 2,
                sizeAttenuation: false,
                transparent: true,
                opacity: 0.6
            });

            const starsVertices = [];
            for (let i = 0; i < 8000; i++) {
                const x = (Math.random() - 0.5) * 3000;
                const y = (Math.random() - 0.5) * 3000;
                const z = (Math.random() - 0.5) * 3000;
                starsVertices.push(x, y, z);
            }

            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            starfield = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(starfield);
            
            // ÂãïÁöÑ„Å™„Ç≠„É©„Ç≠„É©Êòü
            createTwinklingStars();
        }
        
        function createTwinklingStars() {
            const colors = [
                0xffffff, // ÁôΩ
                0x88ddff, // Èùí
                0xffaa44, // „Ç™„É¨„É≥„Ç∏
                0xff6666, // Ëµ§
                0x66ff88, // Á∑ë
                0xdd88ff, // Á¥´
                0xffff88, // ÈªÑËâ≤
                0x88ffff  // „Ç∑„Ç¢„É≥
            ];

            for (let i = 0; i < 800; i++) {
                const geometry = new THREE.SphereGeometry(0.15, 8, 8);
                const color = colors[Math.floor(Math.random() * colors.length)];
                const material = new THREE.MeshBasicMaterial({
                    color: color,
                    transparent: true,
                    opacity: 0.8
                });
                
                const star = new THREE.Mesh(geometry, material);
                star.position.set(
                    (Math.random() - 0.5) * 2500,
                    (Math.random() - 0.5) * 2500,
                    (Math.random() - 0.5) * 2500
                );
                
                // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Áî®„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
                star.userData = {
                    baseColor: color,
                    twinkleSpeed: Math.random() * 3 + 1,
                    twinkleOffset: Math.random() * Math.PI * 2,
                    intensityVariation: Math.random() * 0.7 + 0.3,
                    pulseSpeed: Math.random() * 2 + 0.5
                };
                
                scene.add(star);
                twinklingStars.push(star);
            }
        }

        function createCelestialBodies() {
            // ËªåÈÅìÁ∑ö„ÇíÊèèÁîª
            createOrbitLines();
            
            celestialBodies.forEach((bodyData) => {
                const geometry = new THREE.SphereGeometry(bodyData.radius, 32, 32);
                const material = new THREE.MeshBasicMaterial({ 
                    color: bodyData.color,
                    transparent: true
                });

                const celestialBody = new THREE.Mesh(geometry, material);
                
                // ‰ΩçÁΩÆ„ÇíË®≠ÂÆöÔºàÂ§™ÈôΩ‰ª•Â§ñ„ÅØËªåÈÅì‰∏ä„Å´ÈÖçÁΩÆÔºâ
                if (bodyData.name === 'Â§™ÈôΩ') {
                    celestialBody.position.set(0, 0, 0);
                    // Â§™ÈôΩ„ÅÆÁô∫ÂÖâ„Ç®„Éï„Çß„ÇØ„Éà
                    const glowGeometry = new THREE.SphereGeometry(bodyData.radius * 1.5, 32, 32);
                    const glowMaterial = new THREE.MeshBasicMaterial({
                        color: 0xffff00,
                        transparent: true,
                        opacity: 0.3
                    });
                    const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                    celestialBody.add(glow);
                    
                    // Â§™ÈôΩÂÖâÁ∑ö„Ç®„Éï„Çß„ÇØ„Éà
                    createSunRays(celestialBody);
                } else if (bodyData.name === 'Êúà') {
                    // Âú∞ÁêÉ„ÅÆÂë®„Çä„Å´ÈÖçÁΩÆ
                    const earthPosition = celestialObjects.find(obj => obj.userData.name === 'Âú∞ÁêÉ')?.position || { x: 42, y: 0, z: 0 };
                    celestialBody.position.set(earthPosition.x + 5, earthPosition.y, earthPosition.z);
                } else {
                    const angle = Math.random() * Math.PI * 2;
                    celestialBody.position.set(
                        Math.cos(angle) * bodyData.distance,
                        (Math.random() - 0.5) * 5,
                        Math.sin(angle) * bodyData.distance
                    );
                }

                celestialBody.userData = bodyData;
                celestialObjects.push(celestialBody);
                scene.add(celestialBody);
            });

            // ÂúüÊòü„ÅÆ„É™„É≥„Ç∞„ÇíËøΩÂä†
            const saturnRing = createSaturnRing();
            const saturn = celestialObjects.find(obj => obj.userData.name === 'ÂúüÊòü');
            if (saturn) {
                saturn.add(saturnRing);
            }
        }
        
        function createOrbitLines() {
            celestialBodies.forEach((bodyData) => {
                if (bodyData.distance > 0 && bodyData.name !== 'Êúà') {
                    const orbitGeometry = new THREE.RingGeometry(bodyData.distance - 0.2, bodyData.distance + 0.2, 64);
                    const orbitMaterial = new THREE.MeshBasicMaterial({
                        color: 0x444444,
                        transparent: true,
                        opacity: 0.3,
                        side: THREE.DoubleSide
                    });
                    const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                    orbit.rotation.x = Math.PI / 2;
                    scene.add(orbit);
                }
            });
        }
        
        function createSunRays(sunObject) {
            for (let i = 0; i < 8; i++) {
                const rayGeometry = new THREE.CylinderGeometry(0.1, 0.1, 50, 8);
                const rayMaterial = new THREE.MeshBasicMaterial({
                    color: 0xffff00,
                    transparent: true,
                    opacity: 0.1
                });
                const ray = new THREE.Mesh(rayGeometry, rayMaterial);
                
                const angle = (i / 8) * Math.PI * 2;
                ray.position.set(Math.cos(angle) * 15, 0, Math.sin(angle) * 15);
                ray.rotation.z = angle + Math.PI / 2;
                
                sunObject.add(ray);
            }
        }

        function createSaturnRing() {
            const ringGeometry = new THREE.RingGeometry(7, 12, 32);
            const ringMaterial = new THREE.MeshBasicMaterial({
                color: 0xcccccc,
                transparent: true,
                opacity: 0.6,
                side: THREE.DoubleSide
            });
            const ring = new THREE.Mesh(ringGeometry, ringMaterial);
            ring.rotation.x = Math.PI / 2;
            return ring;
        }

        function setupControls() {
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };

            renderer.domElement.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });

            renderer.domElement.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const deltaMove = {
                        x: e.clientX - previousMousePosition.x,
                        y: e.clientY - previousMousePosition.y
                    };

                    const rotationSpeed = 0.005;
                    camera.position.x = camera.position.x * Math.cos(deltaMove.x * rotationSpeed) - camera.position.z * Math.sin(deltaMove.x * rotationSpeed);
                    camera.position.z = camera.position.x * Math.sin(deltaMove.x * rotationSpeed) + camera.position.z * Math.cos(deltaMove.x * rotationSpeed);
                    
                    previousMousePosition = { x: e.clientX, y: e.clientY };
                    camera.lookAt(scene.position);
                }
                
                // „Éõ„Éê„ÉºÂäπÊûú
                updateMousePosition(e);
                checkHover();
            });

            renderer.domElement.addEventListener('mouseup', () => {
                isDragging = false;
            });

            renderer.domElement.addEventListener('wheel', (e) => {
                const zoomSpeed = 0.1;
                camera.position.multiplyScalar(1 + e.deltaY * zoomSpeed * 0.001);
            });
        }

        function updateMousePosition(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        function checkHover() {
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(celestialObjects.filter(obj => obj.userData.name && obj.userData.distance !== undefined));

            if (intersects.length > 0) {
                const object = intersects[0].object;
                if (object.userData.name) {
                    showObjectLabel(object.userData.name, event.clientX, event.clientY);
                    document.body.style.cursor = 'pointer';
                }
            } else {
                hideObjectLabel();
                document.body.style.cursor = 'crosshair';
            }
        }

        function showObjectLabel(name, x, y) {
            // PCÁâà„ÅÆ„É©„Éô„É´
            if (objectLabel) {
                objectLabel.textContent = name;
                objectLabel.style.left = x + 10 + 'px';
                objectLabel.style.top = y - 30 + 'px';
                objectLabel.style.display = 'block';
            }
            
            // „É¢„Éê„Ç§„É´Áâà„ÅÆ„É©„Éô„É´ÔºàÂ∏∏ÊôÇË°®Á§∫Ôºâ
            if (window.innerWidth <= 768 && planetLabel) {
                planetLabel.textContent = name;
                planetLabel.style.left = x + 10 + 'px';
                planetLabel.style.top = y - 30 + 'px';
                planetLabel.style.display = 'block';
                
                // 3ÁßíÂæå„Å´Ëá™Âãï„ÅßÈö†„Åô
                setTimeout(() => {
                    if (planetLabel) planetLabel.style.display = 'none';
                }, 3000);
            }
        }

        function hideObjectLabel() {
            if (objectLabel) objectLabel.style.display = 'none';
            if (window.innerWidth > 768 && planetLabel) planetLabel.style.display = 'none';
        }

        function setupEventListeners() {
            // „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà
            renderer.domElement.addEventListener('click', onObjectClick);
            
            // „É¢„Éº„ÉÄ„É´„Ç§„Éô„É≥„ÉàÔºàË¶ÅÁ¥†„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅÆ„ÅøÔºâ
            if (closeBtn) {
                closeBtn.onclick = () => {
                    if (modal) modal.style.display = 'none';
                };
            }
            
            window.onclick = (event) => {
                if (modal && event.target === modal) {
                    modal.style.display = 'none';
                }
            };

            // „É™„Çµ„Ç§„Ç∫„Ç§„Éô„É≥„Éà
            window.addEventListener('resize', onWindowResize);
        }

        function onObjectClick(event) {
            updateMousePosition(event);
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(celestialObjects.filter(obj => obj.userData.name && obj.userData.distance !== undefined));
            
            if (intersects.length > 0) {
                const selectedObj = intersects[0].object;
                showModal(selectedObj.userData);
            }
        }

        function showModal(bodyData) {
            if (!modal || !modalTitle || !modalContent) return;
            
            modalTitle.textContent = `${bodyData.name} (${bodyData.type})`;
            
            let content = `
                <p>${bodyData.description}</p>
                <h3>Âü∫Êú¨„Éá„Éº„Çø</h3>
                <ul class="fact-list">
            `;
            
            bodyData.facts.forEach(fact => {
                content += `<li>${fact}</li>`;
            });
            
            content += '</ul>';
            modalContent.innerHTML = content;
            
            // 3D„É¢„Éá„É´„Çí‰ΩúÊàê
            create3DModal(bodyData);
            
            modal.style.display = 'block';
        }
        
        function create3DModal(bodyData) {
            if (!modal3DContainer || !celestialImage || !toggleViewBtn) return;
            
            let showingImage = true;
            
            // Â§©‰ΩìÁîªÂÉè„ÇíË°®Á§∫
            if (bodyData.imageUrl) {
                celestialImage.src = bodyData.imageUrl;
                celestialImage.alt = `${bodyData.name}„ÅÆÁîªÂÉè`;
                celestialImage.style.display = 'block';
                toggleViewBtn.textContent = '3DË°®Á§∫';
                
                celestialImage.onerror = function() {
                    // ÁîªÂÉèË™≠„ÅøËæº„ÅøÂ§±ÊïóÊôÇ„ÅØ3D„Å´Âàá„ÇäÊõø„Åà
                    showingImage = false;
                    this.style.display = 'none';
                    if (toggleViewBtn) toggleViewBtn.textContent = 'ÁîªÂÉèË°®Á§∫';
                    create3DModelFallback(bodyData);
                };
            } else {
                // ÁîªÂÉè„Åå„Å™„ÅÑÂ†¥Âêà„ÅØÊúÄÂàù„Åã„Çâ3DË°®Á§∫
                showingImage = false;
                celestialImage.style.display = 'none';
                toggleViewBtn.textContent = 'ÁîªÂÉèË°®Á§∫';
                create3DModelFallback(bodyData);
            }
            
            // Âàá„ÇäÊõø„Åà„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà
            toggleViewBtn.onclick = function() {
                if (showingImage) {
                    // 3D„Å´Âàá„ÇäÊõø„Åà
                    if (celestialImage) celestialImage.style.display = 'none';
                    create3DModelFallback(bodyData);
                    this.textContent = 'ÁîªÂÉèË°®Á§∫';
                    showingImage = false;
                } else {
                    // ÁîªÂÉè„Å´Âàá„ÇäÊõø„Åà
                    clearCanvas();
                    if (bodyData.imageUrl && celestialImage) {
                        celestialImage.style.display = 'block';
                        this.textContent = '3DË°®Á§∫';
                        showingImage = true;
                    }
                }
            };
        }
        
        function clearCanvas() {
            if (!modal3DContainer) return;
            // Êó¢Â≠ò„ÅÆ3D„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Çí„ÇØ„É™„Ç¢
            const canvases = modal3DContainer.querySelectorAll('canvas');
            canvases.forEach(canvas => canvas.remove());
        }
        
        function create3DModelFallback(bodyData) {
            if (!modal3DContainer) return;
            
            // Êó¢Â≠ò„ÅÆcanvas„Çí„ÇØ„É™„Ç¢
            clearCanvas();
            
            // „É¢„Éº„ÉÄ„É´Áî®„ÅÆ3D„Ç∑„Éº„É≥„Çí‰ΩúÊàê
            modalScene = new THREE.Scene();
            modalCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            modalRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            modalRenderer.setSize(250, 250);
            modalRenderer.setClearColor(0x000011, 1);
            modal3DContainer.appendChild(modalRenderer.domElement);
            
            // Â§©‰Ωì„ÅÆ3D„É¢„Éá„É´„Çí‰ΩúÊàêÔºà„É°„Ç§„É≥ÁîªÈù¢„Å®Âêå„Åò„Çπ„Çø„Ç§„É´Ôºâ
            const geometry = new THREE.SphereGeometry(2, 32, 32);
            let material = new THREE.MeshBasicMaterial({ 
                color: bodyData.color,
                transparent: true
            });

            const modalPlanet = new THREE.Mesh(geometry, material);
            modalScene.add(modalPlanet);
            
            // Â§™ÈôΩ„ÅÆÁâπÂà•„Ç®„Éï„Çß„ÇØ„Éà
            if (bodyData.name === 'Â§™ÈôΩ') {
                // Áô∫ÂÖâ„Ç®„Éï„Çß„ÇØ„ÉàÔºà„É°„Ç§„É≥ÁîªÈù¢„Å®Âêå„ÅòÔºâ
                const glowGeometry = new THREE.SphereGeometry(2.5, 32, 32);
                const glowMaterial = new THREE.MeshBasicMaterial({
                    color: 0xffff00,
                    transparent: true,
                    opacity: 0.3
                });
                const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                modalScene.add(glow);
                
                // Â§™ÈôΩÂÖâÁ∑ö„Ç®„Éï„Çß„ÇØ„ÉàÔºà„É°„Ç§„É≥ÁîªÈù¢„Å®Âêå„ÅòÔºâ
                for (let i = 0; i < 8; i++) {
                    const rayGeometry = new THREE.CylinderGeometry(0.05, 0.05, 25, 8);
                    const rayMaterial = new THREE.MeshBasicMaterial({
                        color: 0xffff00,
                        transparent: true,
                        opacity: 0.1
                    });
                    const ray = new THREE.Mesh(rayGeometry, rayMaterial);
                    
                    const angle = (i / 8) * Math.PI * 2;
                    ray.position.set(Math.cos(angle) * 7.5, 0, Math.sin(angle) * 7.5);
                    ray.rotation.z = angle + Math.PI / 2;
                    
                    modalScene.add(ray);
                }
            }
            
            // ÂúüÊòü„ÅÆ„É™„É≥„Ç∞Ôºà„É°„Ç§„É≥ÁîªÈù¢„Å®Âêå„ÅòÔºâ
            if (bodyData.name === 'ÂúüÊòü') {
                const ringGeometry = new THREE.RingGeometry(3, 4.5, 32);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: 0xcccccc,
                    transparent: true,
                    opacity: 0.6,
                    side: THREE.DoubleSide
                });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = Math.PI / 2;
                modalPlanet.add(ring);
            }
            
            // ËÉåÊôØ„Å´Êòü„ÇíËøΩÂä†Ôºà„É°„Ç§„É≥ÁîªÈù¢„ÅÆÈõ∞Âõ≤Ê∞ó„Å´Âêà„Çè„Åõ„Å¶Ôºâ
            addModalStarfield();
            
            // „Ç´„É°„É©„ÅÆ‰ΩçÁΩÆË®≠ÂÆö
            modalCamera.position.set(0, 1, 5);
            modalCamera.lookAt(modalScene.position);
            
            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„É´„Éº„ÉóÔºà„É°„Ç§„É≥ÁîªÈù¢„Å®Âêå„ÅòÂãï„ÅçÔºâ
            let modalAnimationId;
            function animateModal() {
                if (modal && modal.style.display === 'block' && modalRenderer && modalRenderer.domElement.parentNode) {
                    modalAnimationId = requestAnimationFrame(animateModal);
                    
                    const time = Date.now() * 0.001;
                    
                    // Â§©‰Ωì„ÅÆÂõûËª¢Ôºà„É°„Ç§„É≥ÁîªÈù¢„Å®Âêå„ÅòÔºâ
                    if (bodyData.name === 'Â§™ÈôΩ') {
                        modalPlanet.rotation.y += 0.005;
                        // Â§™ÈôΩÂÖâÁ∑ö„ÅÆÂõûËª¢
                        modalScene.children.forEach(child => {
                            if (child.geometry && child.geometry.type === 'CylinderGeometry') {
                                child.rotation.z += 0.01;
                            }
                        });
                    } else {
                        modalPlanet.rotation.y += 0.01;
                    }
                    
                    // „Ç´„É°„É©„ÅÆÂæÆÂ¶ô„Å™Âãï„Åç
                    modalCamera.position.x = Math.sin(time * 0.5) * 0.5;
                    modalCamera.position.y = 1 + Math.cos(time * 0.3) * 0.2;
                    modalCamera.lookAt(modalScene.position);
                    
                    modalRenderer.render(modalScene, modalCamera);
                } else {
                    if (modalAnimationId) {
                        cancelAnimationFrame(modalAnimationId);
                    }
                }
            }
            animateModal();
        }
        
        function addModalStarfield() {
            if (!modalScene) return;
            
            // „É¢„Éº„ÉÄ„É´Áî®„ÅÆÂ∞è„Åï„Å™ÊòüÁ©∫„Çí‰ΩúÊàê
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({ 
                color: 0xffffff, 
                size: 1,
                sizeAttenuation: false,
                transparent: true,
                opacity: 0.6
            });

            const starsVertices = [];
            for (let i = 0; i < 200; i++) {
                const x = (Math.random() - 0.5) * 50;
                const y = (Math.random() - 0.5) * 50;
                const z = (Math.random() - 0.5) * 50;
                starsVertices.push(x, y, z);
            }

            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            modalScene.add(stars);
            
            // „Ç≠„É©„Ç≠„É©Êòü„ÇÇËøΩÂä†
            const colors = [0xffffff, 0x88ddff, 0xffaa44, 0xff6666, 0x66ff88];
            for (let i = 0; i < 20; i++) {
                const geometry = new THREE.SphereGeometry(0.05, 8, 8);
                const color = colors[Math.floor(Math.random() * colors.length)];
                const material = new THREE.MeshBasicMaterial({
                    color: color,
                    transparent: true,
                    opacity: 0.6
                });
                
                const star = new THREE.Mesh(geometry, material);
                star.position.set(
                    (Math.random() - 0.5) * 40,
                    (Math.random() - 0.5) * 40,
                    (Math.random() - 0.5) * 40
                );
                
                modalScene.add(star);
            }
        }
        
        function create3DModelFallback(bodyData) {
            // „É¢„Éº„ÉÄ„É´Áî®„ÅÆ3D„Ç∑„Éº„É≥„Çí‰ΩúÊàê
            modalScene = new THREE.Scene();
            modalCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            modalRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            modalRenderer.setSize(250, 250);
            modalRenderer.setClearColor(0x000011, 1);
            modal3DContainer.appendChild(modalRenderer.domElement);
            
            // Â§©‰Ωì„ÅÆ3D„É¢„Éá„É´„Çí‰ΩúÊàê
            const geometry = new THREE.SphereGeometry(2, 32, 32);
            let material;
            
            if (bodyData.name === 'Â§™ÈôΩ') {
                material = new THREE.MeshBasicMaterial({ 
                    color: bodyData.color,
                    transparent: true
                });
                
                // Â§™ÈôΩ„ÅÆÁô∫ÂÖâ„Ç®„Éï„Çß„ÇØ„Éà
                const glowGeometry = new THREE.SphereGeometry(2.5, 32, 32);
                const glowMaterial = new THREE.MeshBasicMaterial({
                    color: 0xffff00,
                    transparent: true,
                    opacity: 0.3
                });
                const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                modalScene.add(glow);
            } else {
                material = new THREE.MeshBasicMaterial({ 
                    color: bodyData.color,
                    transparent: true
                });
            }
            
            const modalPlanet = new THREE.Mesh(geometry, material);
            modalScene.add(modalPlanet);
            
            // ÂúüÊòü„ÅÆÂ†¥Âêà„ÅØ„É™„É≥„Ç∞„ÇíËøΩÂä†
            if (bodyData.name === 'ÂúüÊòü') {
                const ringGeometry = new THREE.RingGeometry(3, 4.5, 32);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: 0xcccccc,
                    transparent: true,
                    opacity: 0.6,
                    side: THREE.DoubleSide
                });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = Math.PI / 2;
                modalPlanet.add(ring);
            }
            
            // „Ç´„É°„É©„ÅÆ‰ΩçÁΩÆË®≠ÂÆö
            modalCamera.position.set(0, 1, 5);
            modalCamera.lookAt(modalScene.position);
            
            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„É´„Éº„Éó
            function animateModal() {
                if (modal.style.display === 'block') {
                    requestAnimationFrame(animateModal);
                    modalPlanet.rotation.y += 0.02;
                    modalRenderer.render(modalScene, modalCamera);
                }
            }
            animateModal();
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            
            const time = Date.now() * 0.001;
            
            // ÂãïÁöÑ„Å™Êòü„ÅÆ„Ç≠„É©„Ç≠„É©„Ç®„Éï„Çß„ÇØ„Éà
            twinklingStars.forEach((star) => {
                const userData = star.userData;
                
                // „É©„É≥„ÉÄ„É†„Å™Âº∑Â∫¶Â§âÂåñ
                const twinkle = Math.sin(time * userData.twinkleSpeed + userData.twinkleOffset) * userData.intensityVariation + 0.5;
                const pulse = Math.sin(time * userData.pulseSpeed + userData.twinkleOffset * 2) * 0.3 + 0.7;
                
                // ÂÖâÈáè„Çí„É©„É≥„ÉÄ„É†„Å´Â§âÂåñ
                star.material.opacity = twinkle * pulse;
                
                // Ëâ≤„ÅÆËºùÂ∫¶„ÇÇ„É©„É≥„ÉÄ„É†„Å´Â§âÂåñ
                const brightness = (twinkle + pulse) / 2;
                const color = new THREE.Color(userData.baseColor);
                color.multiplyScalar(brightness + 0.3);
                star.material.color = color;
                
                // „Çµ„Ç§„Ç∫„ÇÇÂæÆÂ¶ô„Å´Â§âÂåñ
                const sizeVariation = 1 + (twinkle - 0.5) * 0.3;
                star.scale.setScalar(sizeVariation);
            });
            
            // Â§©‰Ωì„ÅÆÂõûËª¢„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
            celestialObjects.forEach((obj) => {
                if (obj.userData.name === 'Â§™ÈôΩ') {
                    obj.rotation.y += 0.005;
                    // Â§™ÈôΩ„ÅÆÂÖâÁ∑ö„ÇÇÂõûËª¢
                    obj.children.forEach(child => {
                        if (child.geometry && child.geometry.type === 'CylinderGeometry') {
                            child.rotation.z += 0.01;
                        }
                    });
                } else if (obj.userData.name && obj.userData.distance !== undefined) {
                    obj.rotation.y += 0.01;
                    // ËªåÈÅìÈÅãÂãï
                    const distance = obj.userData.distance;
                    if (distance > 0 && obj.userData.name !== 'Êúà') {
                        obj.position.x = Math.cos(time * 0.1 * (1 / Math.sqrt(distance))) * distance;
                        obj.position.z = Math.sin(time * 0.1 * (1 / Math.sqrt(distance))) * distance;
                    } else if (obj.userData.name === 'Êúà') {
                        // Êúà„ÅØÂú∞ÁêÉ„ÅÆÂë®„Çä„ÇíÂõû„Çã
                        const earth = celestialObjects.find(o => o.userData.name === 'Âú∞ÁêÉ');
                        if (earth) {
                            obj.position.x = earth.position.x + Math.cos(time * 2) * 5;
                            obj.position.z = earth.position.z + Math.sin(time * 2) * 5;
                        }
                    }
                }
            });
            
            // „Ç´„É°„É©„ÇíÂ∏∏„Å´‰∏≠ÂøÉ„ÇíÂêë„Åã„Åõ„Çã
            camera.lookAt(scene.position);
            
            renderer.render(scene, camera);
        }
    </script>
</body>
</html>